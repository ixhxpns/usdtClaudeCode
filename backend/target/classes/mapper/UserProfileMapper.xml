<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.usdttrading.repository.UserProfileMapper">

    <!-- 搜索用户档案 -->
    <select id="searchProfiles" resultType="com.usdttrading.entity.UserProfile">
        SELECT * FROM user_profiles 
        WHERE deleted = 0
        <if test="keyword != null and keyword != ''">
            AND (
                first_name LIKE CONCAT('%', #{keyword}, '%') 
                OR last_name LIKE CONCAT('%', #{keyword}, '%')
                OR country LIKE CONCAT('%', #{keyword}, '%')
                OR city LIKE CONCAT('%', #{keyword}, '%')
            )
        </if>
        ORDER BY updated_at DESC
    </select>

</mapper>