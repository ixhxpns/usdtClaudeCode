<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.usdttrading.repository.WithdrawalMapper">

    <!-- 根据用户ID分页查找提款记录 -->
    <select id="findByUserId" resultType="com.usdttrading.entity.Withdrawal">
        SELECT * FROM withdrawals 
        WHERE user_id = #{userId} AND deleted = 0 
        ORDER BY created_at DESC
    </select>

    <!-- 获取需要自动审核的提款记录 -->
    <select id="findAutoApprovalWithdrawals" resultType="com.usdttrading.entity.Withdrawal">
        SELECT * FROM withdrawals 
        WHERE status = 'pending' 
          AND review_level = 'auto' 
          AND amount &lt;= #{maxAmount}
          AND deleted = 0
        ORDER BY created_at ASC
    </select>

</mapper>