var I=(A,T,p)=>new Promise((l,m)=>{var _=u=>{try{g(p.next(u))}catch(b){m(b)}},E=u=>{try{g(p.throw(u))}catch(b){m(b)}},g=u=>u.done?l(u.value):Promise.resolve(u.value).then(_,E);g((p=p.apply(A,T)).next())});/* empty css             *//* empty css               *//* empty css               *//* empty css                *//* empty css                             *//* empty css                  *//* empty css                        *//* empty css                         */import{k as $,al as G,ak as J,r as U,e as Q,l as k,m as v,G as t,A as e,E as o,q as i,u as j,z as P,C as R}from"./vue-vendor-DL5bj91p.js";import{aB as W,aC as X,aD as Z,U as ee,am as te,aj as ae,aE as se,aF as le,a3 as r,ab as oe,ap as ne,_ as re,aq as ie,ar as de,as as ue,ai as pe,an as ce,ao as me,a2 as _e,aA as C,L as x}from"./element-plus--BWWjcce.js";import{_ as fe}from"./index-CtT-RS4Y.js";const ve={class:"user-detail-view"},ge={key:0,class:"text-center py-8"},be={key:1,class:"space-y-6"},ye={class:"flex justify-between items-center"},we={class:"flex items-center space-x-2"},ke={class:"stat-item"},xe={class:"stat-value"},Te={class:"stat-item"},Ee={class:"stat-value"},Me={class:"stat-item"},De={class:"stat-value"},Ie={class:"stat-item"},Ce={class:"stat-value"},Ae={key:2,class:"text-center py-8"},Be=$({__name:"UserDetailView",setup(A){const T=G();J();const p=U(!0),l=U(null),m=s=>_e(s).format("YYYY-MM-DD HH:mm:ss"),_=s=>(s==null?void 0:s.toFixed(8))||"0.00000000",E=s=>({active:"success",suspended:"danger",pending:"warning"})[s]||"info",g=s=>({active:"正常",suspended:"冻结",pending:"待审核"})[s]||s,u=s=>({verified:"success",pending:"warning",rejected:"danger",none:"info"})[s]||"info",b=s=>({verified:"已认证",pending:"审核中",rejected:"已拒绝",none:"未认证"})[s]||s,Y=s=>({low:"success",medium:"warning",high:"danger"})[s]||"info",F=s=>({low:"低风险",medium:"中风险",high:"高风险"})[s]||s,N=s=>({login:"登录",trade:"交易",withdraw:"提现",deposit:"充值",kyc:"KYC"})[s]||s,K=s=>I(this,null,function*(){try{switch(s){case"active":yield C.confirm("确定要激活此用户吗？","确认操作"),x.success("用户已激活"),M();break;case"suspend":yield C.confirm("确定要冻结此用户吗？","确认操作"),x.success("用户已冻结"),M();break;case"reset-password":yield C.confirm("确定要重置此用户的密码吗？","确认操作"),x.success("密码重置邮件已发送");break}}catch(a){console.error("操作失败:",a)}}),M=()=>I(this,null,function*(){try{p.value=!0;const s=T.params.id;yield new Promise(a=>setTimeout(a,1e3)),l.value={id:s,username:"testuser",email:"test@example.com",phone:"13800138000",status:"active",kycStatus:"verified",level:1,riskLevel:"low",registerIp:"192.168.1.1",lastLoginIp:"192.168.1.2",createdAt:"2024-01-01 10:00:00",lastLoginAt:"2024-01-20 15:30:00",wallets:[{currency:"USDT",balance:1000.123456,frozen:0},{currency:"BTC",balance:.001234,frozen:0}],stats:{totalOrders:25,totalVolume:50000.12,totalFees:50.12,lastTradeTime:"2024-01-20 14:30:00"},recentActivities:[{time:"2024-01-20 15:30:00",type:"login",description:"用户登录",ip:"192.168.1.2"}]}}catch(s){console.error("加载用户详情失败:",s),x.error("加载失败")}finally{p.value=!1}});return Q(()=>{M()}),(s,a)=>{const B=W,q=X,L=ee,y=oe,z=re,D=ue,H=de,O=ne,d=le,S=se,f=ae,V=te,w=pe,c=me,h=ce;return v(),k("div",ve,[t(q,{class:"mb-4"},{default:e(()=>[t(B,{to:"/users"},{default:e(()=>[...a[1]||(a[1]=[o("用户管理",-1)])]),_:1}),t(B,null,{default:e(()=>[...a[2]||(a[2]=[o("用户详情",-1)])]),_:1})]),_:1}),p.value?(v(),k("div",ge,[t(L,{size:32,class:"is-loading"},{default:e(()=>[t(j(Z))]),_:1}),a[3]||(a[3]=i("p",{class:"mt-2 text-gray-500"},"加载中...",-1))])):l.value?(v(),k("div",be,[t(w,null,{header:e(()=>[i("div",ye,[a[8]||(a[8]=i("h3",{class:"text-lg font-medium"},"基础信息",-1)),i("div",we,[t(y,{type:E(l.value.status)},{default:e(()=>[o(r(g(l.value.status)),1)]),_:1},8,["type"]),t(O,{onCommand:K},{dropdown:e(()=>[t(H,null,{default:e(()=>[l.value.status!=="active"?(v(),P(D,{key:0,command:"active"},{default:e(()=>[...a[5]||(a[5]=[o(" 激活账户 ",-1)])]),_:1})):R("",!0),l.value.status==="active"?(v(),P(D,{key:1,command:"suspend"},{default:e(()=>[...a[6]||(a[6]=[o(" 冻结账户 ",-1)])]),_:1})):R("",!0),t(D,{command:"reset-password"},{default:e(()=>[...a[7]||(a[7]=[o(" 重置密码 ",-1)])]),_:1})]),_:1})]),default:e(()=>[t(z,{type:"primary",size:"small"},{default:e(()=>[a[4]||(a[4]=o(" 操作 ",-1)),t(L,null,{default:e(()=>[t(j(ie))]),_:1})]),_:1})]),_:1})])])]),default:e(()=>[t(V,{gutter:20},{default:e(()=>[t(f,{span:12},{default:e(()=>[t(S,{column:1,border:""},{default:e(()=>[t(d,{label:"用户ID"},{default:e(()=>[o(r(l.value.id),1)]),_:1}),t(d,{label:"用户名"},{default:e(()=>[o(r(l.value.username),1)]),_:1}),t(d,{label:"邮箱"},{default:e(()=>[o(r(l.value.email),1)]),_:1}),t(d,{label:"手机号"},{default:e(()=>[o(r(l.value.phone||"未绑定"),1)]),_:1}),t(d,{label:"注册时间"},{default:e(()=>[o(r(m(l.value.createdAt)),1)]),_:1}),t(d,{label:"最后登录"},{default:e(()=>[o(r(m(l.value.lastLoginAt)),1)]),_:1})]),_:1})]),_:1}),t(f,{span:12},{default:e(()=>[t(S,{column:1,border:""},{default:e(()=>[t(d,{label:"实名状态"},{default:e(()=>[t(y,{type:u(l.value.kycStatus)},{default:e(()=>[o(r(b(l.value.kycStatus)),1)]),_:1},8,["type"])]),_:1}),t(d,{label:"账户等级"},{default:e(()=>[o(" VIP "+r(l.value.level||0),1)]),_:1}),t(d,{label:"注册IP"},{default:e(()=>[o(r(l.value.registerIp),1)]),_:1}),t(d,{label:"登录IP"},{default:e(()=>[o(r(l.value.lastLoginIp),1)]),_:1}),t(d,{label:"风险等级"},{default:e(()=>[t(y,{type:Y(l.value.riskLevel)},{default:e(()=>[o(r(F(l.value.riskLevel)),1)]),_:1},8,["type"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(w,null,{header:e(()=>[...a[9]||(a[9]=[i("h3",{class:"text-lg font-medium"},"资产信息",-1)])]),default:e(()=>[t(h,{data:l.value.wallets,stripe:""},{default:e(()=>[t(c,{prop:"currency",label:"币种",width:"100"}),t(c,{prop:"balance",label:"可用余额",align:"right"},{default:e(({row:n})=>[o(r(_(n.balance)),1)]),_:1}),t(c,{prop:"frozen",label:"冻结余额",align:"right"},{default:e(({row:n})=>[o(r(_(n.frozen)),1)]),_:1}),t(c,{prop:"total",label:"总余额",align:"right"},{default:e(({row:n})=>[o(r(_(n.balance+n.frozen)),1)]),_:1})]),_:1},8,["data"])]),_:1}),t(w,null,{header:e(()=>[...a[10]||(a[10]=[i("h3",{class:"text-lg font-medium"},"交易统计",-1)])]),default:e(()=>[t(V,{gutter:20},{default:e(()=>[t(f,{span:6},{default:e(()=>{var n;return[i("div",ke,[i("div",xe,r(((n=l.value.stats)==null?void 0:n.totalOrders)||0),1),a[11]||(a[11]=i("div",{class:"stat-label"},"总订单数",-1))])]}),_:1}),t(f,{span:6},{default:e(()=>{var n;return[i("div",Te,[i("div",Ee,r(_(((n=l.value.stats)==null?void 0:n.totalVolume)||0)),1),a[12]||(a[12]=i("div",{class:"stat-label"},"总交易量",-1))])]}),_:1}),t(f,{span:6},{default:e(()=>{var n;return[i("div",Me,[i("div",De,r(_(((n=l.value.stats)==null?void 0:n.totalFees)||0)),1),a[13]||(a[13]=i("div",{class:"stat-label"},"总手续费",-1))])]}),_:1}),t(f,{span:6},{default:e(()=>{var n;return[i("div",Ie,[i("div",Ce,r((n=l.value.stats)!=null&&n.lastTradeTime?m(l.value.stats.lastTradeTime):"无"),1),a[14]||(a[14]=i("div",{class:"stat-label"},"最后交易",-1))])]}),_:1})]),_:1})]),_:1}),t(w,null,{header:e(()=>[...a[15]||(a[15]=[i("h3",{class:"text-lg font-medium"},"最近活动",-1)])]),default:e(()=>[t(h,{data:l.value.recentActivities,stripe:""},{default:e(()=>[t(c,{prop:"time",label:"时间",width:"180"},{default:e(({row:n})=>[o(r(m(n.time)),1)]),_:1}),t(c,{prop:"type",label:"类型",width:"120"},{default:e(({row:n})=>[t(y,{size:"small"},{default:e(()=>[o(r(N(n.type)),1)]),_:2},1024)]),_:1}),t(c,{prop:"description",label:"描述"}),t(c,{prop:"ip",label:"IP地址",width:"150"})]),_:1},8,["data"])]),_:1})])):(v(),k("div",Ae,[a[17]||(a[17]=i("p",{class:"text-gray-500"},"用户不存在",-1)),t(z,{onClick:a[0]||(a[0]=n=>s.$router.back()),class:"mt-4"},{default:e(()=>[...a[16]||(a[16]=[o("返回",-1)])]),_:1})]))])}}}),Ke=fe(Be,[["__scopeId","data-v-2ae07fe1"]]);export{Ke as default};
