var K=(U,T,d)=>new Promise((y,p)=>{var C=r=>{try{g(d.next(r))}catch(k){p(k)}},V=r=>{try{g(d.throw(r))}catch(k){p(k)}},g=r=>r.done?y(r.value):Promise.resolve(r.value).then(C,V);g((d=d.apply(U,T)).next())});/* empty css             *//* empty css                */import"./el-form-item-l0sNRNKZ.js";/* empty css                *//* empty css                       *//* empty css               *//* empty css               *//* empty css                 *//* empty css                             *//* empty css                  */import{k as re,ak as ie,r as c,M as I,e as de,l as S,m as N,G as t,A as a,q as s,E as n,C as pe,W as ue,u as me}from"./vue-vendor-DL5bj91p.js";import{am as ce,aj as _e,ac as ve,ad as fe,ae as ge,_ as ke,an as be,ao as ye,aE as Ce,aF as xe,a3 as _,ab as we,ay as Ve,W as he,U as ze,af as Ee,ai as Te,$ as De,V as Ke,az as Ie,a2 as Ue,L as E}from"./element-plus--BWWjcce.js";import{_ as $e}from"./index-CtT-RS4Y.js";const je={class:"kyc-pending-view"},Me={class:"flex justify-between items-center"},Pe={class:"flex items-center space-x-2"},Ye={class:"filters mb-4"},Le={class:"p-4"},Se={class:"flex space-x-4"},Ne={class:"text-center"},Re=["src","onClick"],Fe={class:"text-center"},Be=["src","onClick"],Ae={key:0,class:"text-center"},He=["src","onClick"],We={class:"mt-4 flex space-x-2"},qe={class:"pagination-wrapper mt-4 flex justify-center"},Ge={class:"text-center"},Oe=["src"],Je=re({__name:"KYCPendingView",setup(U){const T=ie(),d=c(!1),y=c(!1),p=c(!1),C=c(!1),V=c(""),g=c(""),r=c("approve"),k=c(null),h=I({riskLevel:"",dateRange:[]}),u=I({current:1,pageSize:20,total:0}),b=I({remark:""}),$=c([]),R=o=>Ue(o).format("YYYY-MM-DD HH:mm:ss"),F=o=>({id_card:"身份证",passport:"护照",driving_license:"驾驶证"})[o]||o,B=o=>({low:"success",medium:"warning",high:"danger"})[o]||"info",A=o=>({low:"低风险",medium:"中风险",high:"高风险"})[o]||o,H=()=>{u.current=1,v()},W=o=>{u.pageSize=o,v()},q=o=>{u.current=o,v()},D=o=>{V.value=o,C.value=!0},j=o=>{k.value=o,r.value="approve",b.remark="",p.value=!0},M=o=>{k.value=o,r.value="reject",b.remark="",p.value=!0},G=()=>K(this,null,function*(){if(r.value==="reject"&&!b.remark.trim()){E.error("拒绝时必须填写拒绝原因");return}try{y.value=!0,yield new Promise(o=>setTimeout(o,1e3)),E.success(`KYC审核${r.value==="approve"?"通过":"拒绝"}成功`),p.value=!1,v()}catch(o){console.error("审核失败:",o),E.error("审核失败")}finally{y.value=!1}}),O=o=>{T.push(`/users/${o}`)},J=()=>{v()},v=()=>K(this,null,function*(){try{d.value=!0,yield new Promise(o=>setTimeout(o,1e3)),$.value=[{id:"KYC001",userId:"USER001",username:"testuser",email:"test@example.com",realName:"张三",idType:"id_card",idNumber:"110101199001011234",gender:"male",birthDate:"1990-01-01",nationality:"中国",riskLevel:"low",submitTime:"2024-01-20 10:30:00",idCardFront:"https://via.placeholder.com/300x200",idCardBack:"https://via.placeholder.com/300x200",selfiePhoto:"https://via.placeholder.com/300x200"}],u.total=1}catch(o){console.error("加载数据失败:",o),E.error("加载数据失败")}finally{d.value=!1}});return de(()=>{v()}),(o,e)=>{const Q=ze,P=he,i=ke,z=fe,X=ve,x=_e,Z=ge,Y=ce,w=xe,ee=Ce,m=ye,te=we,le=be,ae=Ve,oe=Te,se=Ke,ne=De,L=Ie;return N(),S("div",je,[t(oe,null,{header:a(()=>[s("div",Me,[e[11]||(e[11]=s("h3",{class:"text-lg font-medium"},"待审核KYC",-1)),s("div",Pe,[t(P,{modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=l=>g.value=l),placeholder:"搜索用户...",class:"w-64",size:"small",onKeyup:ue(v,["enter"])},{prefix:a(()=>[t(Q,null,{default:a(()=>[t(me(Ee))]),_:1})]),_:1},8,["modelValue"]),t(i,{onClick:v,size:"small"},{default:a(()=>[...e[9]||(e[9]=[n("搜索",-1)])]),_:1}),t(i,{onClick:J,loading:d.value,size:"small"},{default:a(()=>[...e[10]||(e[10]=[n(" 刷新 ",-1)])]),_:1},8,["loading"])])])]),default:a(()=>[s("div",Ye,[t(Y,{gutter:16},{default:a(()=>[t(x,{span:6},{default:a(()=>[t(X,{modelValue:h.riskLevel,"onUpdate:modelValue":e[1]||(e[1]=l=>h.riskLevel=l),placeholder:"风险等级",clearable:"",size:"small"},{default:a(()=>[t(z,{label:"全部",value:""}),t(z,{label:"低风险",value:"low"}),t(z,{label:"中风险",value:"medium"}),t(z,{label:"高风险",value:"high"})]),_:1},8,["modelValue"])]),_:1}),t(x,{span:6},{default:a(()=>[t(Z,{modelValue:h.dateRange,"onUpdate:modelValue":e[2]||(e[2]=l=>h.dateRange=l),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small"},null,8,["modelValue"])]),_:1}),t(x,{span:6},{default:a(()=>[t(i,{type:"primary",onClick:H,size:"small"},{default:a(()=>[...e[12]||(e[12]=[n(" 筛选 ",-1)])]),_:1})]),_:1})]),_:1})]),t(le,{data:$.value,loading:d.value,stripe:""},{default:a(()=>[t(m,{type:"expand"},{default:a(({row:l})=>[s("div",Le,[t(Y,{gutter:20},{default:a(()=>[t(x,{span:12},{default:a(()=>[e[13]||(e[13]=s("h4",{class:"mb-2 font-medium"},"个人信息",-1)),t(ee,{column:1,size:"small",border:""},{default:a(()=>[t(w,{label:"真实姓名"},{default:a(()=>[n(_(l.realName),1)]),_:2},1024),t(w,{label:"身份证号"},{default:a(()=>[n(_(l.idNumber),1)]),_:2},1024),t(w,{label:"性别"},{default:a(()=>[n(_(l.gender==="male"?"男":"女"),1)]),_:2},1024),t(w,{label:"出生日期"},{default:a(()=>[n(_(l.birthDate),1)]),_:2},1024),t(w,{label:"国籍"},{default:a(()=>[n(_(l.nationality),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),t(x,{span:12},{default:a(()=>[e[17]||(e[17]=s("h4",{class:"mb-2 font-medium"},"证件照片",-1)),s("div",Se,[s("div",Ne,[s("img",{src:l.idCardFront,alt:"身份证正面",class:"w-32 h-20 object-cover border cursor-pointer",onClick:f=>D(l.idCardFront)},null,8,Re),e[14]||(e[14]=s("p",{class:"text-sm text-gray-500 mt-1"},"身份证正面",-1))]),s("div",Fe,[s("img",{src:l.idCardBack,alt:"身份证背面",class:"w-32 h-20 object-cover border cursor-pointer",onClick:f=>D(l.idCardBack)},null,8,Be),e[15]||(e[15]=s("p",{class:"text-sm text-gray-500 mt-1"},"身份证背面",-1))]),l.selfiePhoto?(N(),S("div",Ae,[s("img",{src:l.selfiePhoto,alt:"手持身份证",class:"w-32 h-20 object-cover border cursor-pointer",onClick:f=>D(l.selfiePhoto)},null,8,He),e[16]||(e[16]=s("p",{class:"text-sm text-gray-500 mt-1"},"手持身份证",-1))])):pe("",!0)])]),_:2},1024)]),_:2},1024),s("div",We,[t(i,{type:"success",size:"small",onClick:f=>j(l)},{default:a(()=>[...e[18]||(e[18]=[n(" 通过 ",-1)])]),_:2},1032,["onClick"]),t(i,{type:"danger",size:"small",onClick:f=>M(l)},{default:a(()=>[...e[19]||(e[19]=[n(" 拒绝 ",-1)])]),_:2},1032,["onClick"])])])]),_:1}),t(m,{prop:"userId",label:"用户ID",width:"100"}),t(m,{prop:"username",label:"用户名",width:"120"}),t(m,{prop:"email",label:"邮箱",width:"200"}),t(m,{prop:"realName",label:"真实姓名",width:"120"}),t(m,{prop:"idType",label:"证件类型",width:"100"},{default:a(({row:l})=>[n(_(F(l.idType)),1)]),_:1}),t(m,{prop:"riskLevel",label:"风险等级",width:"100"},{default:a(({row:l})=>[t(te,{type:B(l.riskLevel),size:"small"},{default:a(()=>[n(_(A(l.riskLevel)),1)]),_:2},1032,["type"])]),_:1}),t(m,{prop:"submitTime",label:"提交时间",width:"160"},{default:a(({row:l})=>[n(_(R(l.submitTime)),1)]),_:1}),t(m,{label:"操作",width:"180"},{default:a(({row:l})=>[t(i,{type:"success",link:"",size:"small",onClick:f=>j(l)},{default:a(()=>[...e[20]||(e[20]=[n(" 通过 ",-1)])]),_:2},1032,["onClick"]),t(i,{type:"danger",link:"",size:"small",onClick:f=>M(l)},{default:a(()=>[...e[21]||(e[21]=[n(" 拒绝 ",-1)])]),_:2},1032,["onClick"]),t(i,{type:"primary",link:"",size:"small",onClick:f=>O(l.userId)},{default:a(()=>[...e[22]||(e[22]=[n(" 查看用户 ",-1)])]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","loading"]),s("div",qe,[t(ae,{"current-page":u.current,"onUpdate:currentPage":e[3]||(e[3]=l=>u.current=l),"page-size":u.pageSize,"onUpdate:pageSize":e[4]||(e[4]=l=>u.pageSize=l),"page-sizes":[10,20,50,100],total:u.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:W,onCurrentChange:q},null,8,["current-page","page-size","total"])])]),_:1}),t(L,{modelValue:p.value,"onUpdate:modelValue":e[7]||(e[7]=l=>p.value=l),title:r.value==="approve"?"通过KYC审核":"拒绝KYC审核",width:"500px"},{footer:a(()=>[t(i,{onClick:e[6]||(e[6]=l=>p.value=!1)},{default:a(()=>[...e[23]||(e[23]=[n("取消",-1)])]),_:1}),t(i,{type:r.value==="approve"?"success":"danger",onClick:G,loading:y.value},{default:a(()=>[n(" 确认"+_(r.value==="approve"?"通过":"拒绝"),1)]),_:1},8,["type","loading"])]),default:a(()=>[t(ne,{model:b,"label-width":"80px"},{default:a(()=>[t(se,{label:"备注"},{default:a(()=>[t(P,{modelValue:b.remark,"onUpdate:modelValue":e[5]||(e[5]=l=>b.remark=l),type:"textarea",rows:4,placeholder:r.value==="approve"?"通过原因（可选）":"拒绝原因（必填）"},null,8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),t(L,{modelValue:C.value,"onUpdate:modelValue":e[8]||(e[8]=l=>C.value=l),title:"图片预览",width:"800px",center:""},{default:a(()=>[s("div",Ge,[s("img",{src:V.value,alt:"预览",class:"max-w-full max-h-96"},null,8,Oe)])]),_:1},8,["modelValue"])])}}}),ut=$e(Je,[["__scopeId","data-v-67724a10"]]);export{ut as default};
