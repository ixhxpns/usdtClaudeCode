var xe=Object.defineProperty,He=Object.defineProperties;var Ue=Object.getOwnPropertyDescriptors;var oe=Object.getOwnPropertySymbols;var $e=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable;var ne=(y,c,d)=>c in y?xe(y,c,{enumerable:!0,configurable:!0,writable:!0,value:d}):y[c]=d,ie=(y,c)=>{for(var d in c||(c={}))$e.call(c,d)&&ne(y,d,c[d]);if(oe)for(var d of oe(c))Se.call(c,d)&&ne(y,d,c[d]);return y},re=(y,c)=>He(y,Ue(c));var V=(y,c,d)=>new Promise((H,g)=>{var M=r=>{try{I(d.next(r))}catch(m){g(m)}},T=r=>{try{I(d.throw(r))}catch(m){g(m)}},I=r=>r.done?H(r.value):Promise.resolve(r.value).then(M,T);I((d=d.apply(y,c)).next())});/* empty css             *//* empty css                   *//* empty css                *//* empty css                 *//* empty css                             *//* empty css                       *//* empty css               *//* empty css               *//* empty css                 *//* empty css                  *//* empty css                        *//* empty css                  */import"./el-form-item-l0sNRNKZ.js";/* empty css                */import{u as ze,_ as Oe}from"./index-CtT-RS4Y.js";import{aj as We,ai as Re,a3 as n,U as Le,a7 as Ye,a6 as Ne,aG as Fe,aH as Be,am as Ge,$ as je,V as qe,W as Je,aI as Ze,ac as Ke,ad as Xe,ae as Qe,_ as et,af as tt,ag as at,aJ as de,an as st,ao as lt,aa as ot,X as N,ab as nt,s as F,a2 as B,ax as it,ay as rt,aK as dt,a5 as ut,aL as ct,aM as mt,aE as pt,aF as _t,Z as ft,aN as vt,aO as yt,az as gt,L as v,aA as G}from"./element-plus--BWWjcce.js";import{k as bt,r as A,M as O,c as Et,e as kt,l as x,m as C,G as e,z as j,C as q,A as a,q as l,u as p,E as i,B as ht,F as wt,Y as Dt}from"./vue-vendor-DL5bj91p.js";const Vt={class:"withdrawal-pending-view"},Ct={class:"stat-content"},At={class:"stat-value"},Mt={class:"stat-icon pending"},Tt={class:"stat-content"},It={class:"stat-value"},Pt={class:"stat-icon warning"},xt={class:"stat-content"},Ht={class:"stat-value"},Ut={class:"stat-icon success"},$t={class:"stat-content"},St={class:"stat-value"},zt={class:"stat-icon info"},Ot={class:"table-header"},Wt={class:"table-actions"},Rt={key:0},Lt={class:"user-info"},Yt={class:"user-details"},Nt={class:"username"},Ft={class:"email"},Bt={class:"amount-info"},Gt={class:"amount"},jt={class:"fee"},qt={class:"payment-info"},Jt={class:"method"},Zt={class:"account"},Kt={key:1,class:"card-view"},Xt={class:"withdrawal-cards"},Qt={class:"card-header"},ea={class:"card-id"},ta={class:"card-body"},aa={class:"user-section"},sa={class:"user-info"},la={class:"username"},oa={class:"email"},na={class:"amount-section"},ia={class:"amount-value"},ra={class:"fee-info"},da={class:"payment-section"},ua={class:"payment-method"},ca={class:"payment-account"},ma={class:"time-section"},pa={class:"submit-time"},_a={class:"card-footer"},fa={class:"pagination-wrapper"},va={class:"batch-info"},ya={class:"batch-buttons"},ga={key:0,class:"review-content"},ba={class:"risk-assessment"},Ea={class:"review-form"},ka=bt({__name:"WithdrawalPendingView",setup(y){ze();const c=A(!1),d=A("list"),H=A([]),g=A([]),M=A(null),T=A(!1),I=A(!1),r=A(null),m=O({withdrawalId:"",userInfo:"",minAmount:null,maxAmount:null,priority:""}),E=O({currentPage:1,pageSize:20,total:0}),U=O({pendingCount:0,pendingAmount:0,todayProcessed:0,avgProcessTime:0}),_=O({decision:"APPROVED",remarks:"",processType:"AUTO"}),ue=Et(()=>g.value.reduce((o,t)=>o+t.amount,0)),k=o=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(o),J=o=>{switch(o){case"HIGH":return"danger";case"MEDIUM":return"warning";case"LOW":return"success";default:return"info"}},Z=o=>{switch(o){case"HIGH":return"高";case"MEDIUM":return"中";case"LOW":return"低";default:return"普通"}},ce=o=>{switch(o){case"HIGH":return"high-priority";case"MEDIUM":return"medium-priority";case"LOW":return"low-priority";default:return"normal-priority"}},K=o=>o>60?"urgent":o>30?"warning":"normal",W=o=>{if(o<60)return`${o}分鐘`;{const t=Math.floor(o/60),u=o%60;return`${t}小時${u}分鐘`}},R=o=>{const t=o.riskScore||0;return t>=80?{title:"高風險提現",type:"error",description:"該提現存在高風險因素，建議仔細審核或進行人工處理"}:t>=50?{title:"中等風險提現",type:"warning",description:"該提現存在一定風險因素，建議關注相關指標"}:{title:"低風險提現",type:"success",description:"該提現風險較低，可正常處理"}},b=()=>V(this,null,function*(){var o,t;try{c.value=!0;const u=re(ie({page:E.currentPage,pageSize:E.pageSize,status:"PENDING"},m),{startDate:(o=M.value)==null?void 0:o[0],endDate:(t=M.value)==null?void 0:t[1]});pe()}catch(u){v.error(u.message||"載入提現列表失敗")}finally{c.value=!1}}),me=()=>V(this,null,function*(){try{Object.assign(U,{pendingCount:23,pendingAmount:45680.5,todayProcessed:67,avgProcessTime:25})}catch(o){console.error("載入統計信息失敗:",o)}}),pe=()=>{H.value=[{id:"W001",user:{username:"john_doe",email:"john@example.com",avatar:""},amount:5e3,fee:50,paymentMethod:"銀行轉賬",paymentAccount:"***1234",priority:"HIGH",waitTime:75,createdAt:"2024-01-20T10:30:00Z",riskScore:85},{id:"W002",user:{username:"jane_smith",email:"jane@example.com",avatar:""},amount:1200,fee:12,paymentMethod:"USDT",paymentAccount:"TN7p...8xK2",priority:"MEDIUM",waitTime:35,createdAt:"2024-01-20T12:15:00Z",riskScore:25}],E.total=2},_e=()=>{Object.assign(m,{withdrawalId:"",userInfo:"",minAmount:null,maxAmount:null,priority:""}),M.value=null,E.currentPage=1,b()},fe=o=>{g.value=o},ve=({prop:o,order:t})=>{b()},X=o=>{r.value=o,_.decision="APPROVED",_.remarks="",_.processType="AUTO",T.value=!0},Q=o=>V(this,null,function*(){try{yield G.confirm(`確定快速通過提現 #${o.id} 嗎？`,"確認操作"),v.success("提現審核通過"),b()}catch(t){t!=="cancel"&&v.error(t.message||"審核失敗")}}),ye=()=>V(this,null,function*(){if(r.value){if((_.decision==="REJECTED"||_.decision==="HOLD")&&!_.remarks){v.warning("拒絕或暫緩提現時必須填寫備註");return}try{I.value=!0,v.success("審核提交成功"),T.value=!1,b()}catch(o){v.error(o.message||"審核提交失敗")}finally{I.value=!1}}}),ge=()=>V(this,null,function*(){try{v.success("智能分配完成"),b()}catch(o){v.error(o.message||"智能分配失敗")}}),be=()=>V(this,null,function*(){try{yield G.confirm(`確定批量通過選中的 ${g.value.length} 筆提現嗎？`,"批量操作");const o=g.value.map(t=>t.id);v.success("批量審核成功"),b()}catch(o){o!=="cancel"&&v.error(o.message||"批量審核失敗")}}),Ee=()=>V(this,null,function*(){try{const{value:o}=yield G.prompt(`確定批量拒絕選中的 ${g.value.length} 筆提現嗎？請填寫拒絕原因：`,"批量拒絕",{confirmButtonText:"確認拒絕",cancelButtonText:"取消"}),t=g.value.map(u=>u.id);v.success("批量拒絕成功"),b()}catch(o){o!=="cancel"&&v.error(o.message||"批量拒絕失敗")}}),ke=()=>V(this,null,function*(){v.info("審核員分配功能開發中")});return kt(()=>{b(),me()}),(o,t)=>{const u=Le,P=Re,S=We,he=Ge,L=Je,h=qe,ee=Ze,z=Xe,we=Ke,De=Qe,f=et,te=je,Ve=dt,w=lt,ae=ot,se=nt,Ce=st,Ae=rt,D=_t,Me=pt,Te=ft,$=yt,le=vt,Ie=gt,Pe=it;return C(),x("div",Vt,[e(he,{gutter:24,class:"stats-row"},{default:a(()=>[e(S,{span:6},{default:a(()=>[e(P,{class:"stat-card"},{default:a(()=>[l("div",Ct,[l("div",At,n(U.pendingCount),1),t[15]||(t[15]=l("div",{class:"stat-label"},"待處理",-1))]),l("div",Mt,[e(u,null,{default:a(()=>[e(p(Ye))]),_:1})])]),_:1})]),_:1}),e(S,{span:6},{default:a(()=>[e(P,{class:"stat-card"},{default:a(()=>[l("div",Tt,[l("div",It,"$"+n(k(U.pendingAmount)),1),t[16]||(t[16]=l("div",{class:"stat-label"},"待處理金額",-1))]),l("div",Pt,[e(u,null,{default:a(()=>[e(p(Ne))]),_:1})])]),_:1})]),_:1}),e(S,{span:6},{default:a(()=>[e(P,{class:"stat-card"},{default:a(()=>[l("div",xt,[l("div",Ht,n(U.todayProcessed),1),t[17]||(t[17]=l("div",{class:"stat-label"},"今日已處理",-1))]),l("div",Ut,[e(u,null,{default:a(()=>[e(p(Fe))]),_:1})])]),_:1})]),_:1}),e(S,{span:6},{default:a(()=>[e(P,{class:"stat-card"},{default:a(()=>[l("div",$t,[l("div",St,n(U.avgProcessTime)+"分鐘",1),t[18]||(t[18]=l("div",{class:"stat-label"},"平均處理時間",-1))]),l("div",zt,[e(u,null,{default:a(()=>[e(p(Be))]),_:1})])]),_:1})]),_:1})]),_:1}),e(P,{class:"filter-card",shadow:"never"},{default:a(()=>[e(te,{model:m,inline:"","label-width":"100px"},{default:a(()=>[e(h,{label:"提現ID"},{default:a(()=>[e(L,{modelValue:m.withdrawalId,"onUpdate:modelValue":t[0]||(t[0]=s=>m.withdrawalId=s),placeholder:"請輸入提現ID",clearable:""},null,8,["modelValue"])]),_:1}),e(h,{label:"用戶信息"},{default:a(()=>[e(L,{modelValue:m.userInfo,"onUpdate:modelValue":t[1]||(t[1]=s=>m.userInfo=s),placeholder:"用戶名/郵箱/手機",clearable:""},null,8,["modelValue"])]),_:1}),e(h,{label:"提現金額"},{default:a(()=>[e(ee,{modelValue:m.minAmount,"onUpdate:modelValue":t[2]||(t[2]=s=>m.minAmount=s),placeholder:"最小金額",min:0,precision:2,style:{width:"120px"}},null,8,["modelValue"]),t[19]||(t[19]=l("span",{style:{margin:"0 8px"}},"-",-1)),e(ee,{modelValue:m.maxAmount,"onUpdate:modelValue":t[3]||(t[3]=s=>m.maxAmount=s),placeholder:"最大金額",min:0,precision:2,style:{width:"120px"}},null,8,["modelValue"])]),_:1}),e(h,{label:"優先級"},{default:a(()=>[e(we,{modelValue:m.priority,"onUpdate:modelValue":t[4]||(t[4]=s=>m.priority=s),placeholder:"選擇優先級",clearable:""},{default:a(()=>[e(z,{label:"全部",value:""}),e(z,{label:"高",value:"HIGH"}),e(z,{label:"中",value:"MEDIUM"}),e(z,{label:"低",value:"LOW"})]),_:1},8,["modelValue"])]),_:1}),e(h,{label:"提交時間"},{default:a(()=>[e(De,{modelValue:M.value,"onUpdate:modelValue":t[5]||(t[5]=s=>M.value=s),type:"datetimerange","range-separator":"至","start-placeholder":"開始時間","end-placeholder":"結束時間",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),e(h,null,{default:a(()=>[e(f,{type:"primary",onClick:b},{default:a(()=>[e(u,null,{default:a(()=>[e(p(tt))]),_:1}),t[20]||(t[20]=i(" 搜索 ",-1))]),_:1}),e(f,{onClick:_e},{default:a(()=>[e(u,null,{default:a(()=>[e(p(at))]),_:1}),t[21]||(t[21]=i(" 重置 ",-1))]),_:1}),e(f,{type:"success",onClick:ge},{default:a(()=>[e(u,null,{default:a(()=>[e(p(de))]),_:1}),t[22]||(t[22]=i(" 智能分配 ",-1))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(P,{class:"table-card",shadow:"never"},{header:a(()=>[l("div",Ot,[t[25]||(t[25]=l("h3",null,"待處理提現列表",-1)),l("div",Wt,[e(Ve,null,{default:a(()=>[e(f,{type:d.value==="list"?"primary":"",onClick:t[6]||(t[6]=s=>d.value="list")},{default:a(()=>[e(u,null,{default:a(()=>[e(p(ut))]),_:1}),t[23]||(t[23]=i(" 列表視圖 ",-1))]),_:1},8,["type"]),e(f,{type:d.value==="card"?"primary":"",onClick:t[7]||(t[7]=s=>d.value="card")},{default:a(()=>[e(u,null,{default:a(()=>[e(p(ct))]),_:1}),t[24]||(t[24]=i(" 卡片視圖 ",-1))]),_:1},8,["type"])]),_:1})])])]),default:a(()=>[d.value==="list"?(C(),x("div",Rt,[ht((C(),j(Ce,{data:H.value,"row-key":"id",onSelectionChange:fe,onSortChange:ve},{default:a(()=>[e(w,{type:"selection",width:"50"}),e(w,{prop:"id",label:"提現ID",width:"100",sortable:"custom"}),e(w,{label:"用戶信息","min-width":"200"},{default:a(({row:s})=>[l("div",Lt,[e(ae,{size:32,src:s.user.avatar},{default:a(()=>[e(u,null,{default:a(()=>[e(p(N))]),_:1})]),_:2},1032,["src"]),l("div",Yt,[l("div",Nt,n(s.user.username),1),l("div",Ft,n(s.user.email),1)])])]),_:1}),e(w,{label:"提現金額",width:"140",sortable:"custom"},{default:a(({row:s})=>[l("div",Bt,[l("div",Gt,"$"+n(k(s.amount)),1),l("div",jt,"手續費: $"+n(k(s.fee)),1)])]),_:1}),e(w,{label:"收款信息","min-width":"200"},{default:a(({row:s})=>[l("div",qt,[l("div",Jt,n(s.paymentMethod),1),l("div",Zt,n(s.paymentAccount),1)])]),_:1}),e(w,{label:"優先級",width:"100",align:"center"},{default:a(({row:s})=>[e(se,{type:J(s.priority)},{default:a(()=>[i(n(Z(s.priority)),1)]),_:2},1032,["type"])]),_:1}),e(w,{label:"等待時間",width:"120",sortable:"custom"},{default:a(({row:s})=>[l("div",{class:F(["wait-time",K(s.waitTime)])},n(W(s.waitTime)),3)]),_:1}),e(w,{label:"提交時間",width:"160"},{default:a(({row:s})=>[i(n(p(B)(s.createdAt).format("MM-DD HH:mm")),1)]),_:1}),e(w,{label:"操作",width:"160",fixed:"right"},{default:a(({row:s})=>[e(f,{type:"primary",size:"small",onClick:Y=>X(s)},{default:a(()=>[...t[26]||(t[26]=[i(" 審核 ",-1)])]),_:2},1032,["onClick"]),e(f,{type:"success",size:"small",onClick:Y=>Q(s)},{default:a(()=>[...t[27]||(t[27]=[i(" 快速通過 ",-1)])]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[Pe,c.value]])])):(C(),x("div",Kt,[l("div",Xt,[(C(!0),x(wt,null,Dt(H.value,s=>(C(),x("div",{key:s.id,class:F(["withdrawal-card",ce(s.priority)])},[l("div",Qt,[l("div",ea,"提現 #"+n(s.id),1),e(se,{type:J(s.priority),size:"small"},{default:a(()=>[i(n(Z(s.priority)),1)]),_:2},1032,["type"])]),l("div",ta,[l("div",aa,[e(ae,{size:40,src:s.user.avatar},{default:a(()=>[e(u,null,{default:a(()=>[e(p(N))]),_:1})]),_:2},1032,["src"]),l("div",sa,[l("div",la,n(s.user.username),1),l("div",oa,n(s.user.email),1)])]),l("div",na,[t[28]||(t[28]=l("div",{class:"amount-label"},"提現金額",-1)),l("div",ia,"$"+n(k(s.amount)),1),l("div",ra,"手續費: $"+n(k(s.fee)),1)]),l("div",da,[l("div",ua,n(s.paymentMethod),1),l("div",ca,n(s.paymentAccount),1)]),l("div",ma,[l("div",pa," 提交時間: "+n(p(B)(s.createdAt).format("MM-DD HH:mm")),1),l("div",{class:F(["wait-time",K(s.waitTime)])}," 等待: "+n(W(s.waitTime)),3)])]),l("div",_a,[e(f,{type:"primary",size:"small",onClick:Y=>X(s)},{default:a(()=>[...t[29]||(t[29]=[i(" 詳細審核 ",-1)])]),_:2},1032,["onClick"]),e(f,{type:"success",size:"small",onClick:Y=>Q(s)},{default:a(()=>[...t[30]||(t[30]=[i(" 快速通過 ",-1)])]),_:2},1032,["onClick"])])],2))),128))])])),l("div",fa,[e(Ae,{"current-page":E.currentPage,"onUpdate:currentPage":t[8]||(t[8]=s=>E.currentPage=s),"page-size":E.pageSize,"onUpdate:pageSize":t[9]||(t[9]=s=>E.pageSize=s),"page-sizes":[10,20,50,100],total:E.total,layout:"total, sizes, prev, pager, next",onSizeChange:b,onCurrentChange:b},null,8,["current-page","page-size","total"])])]),_:1}),g.value.length>0?(C(),j(P,{key:0,class:"batch-actions",shadow:"never"},{default:a(()=>[l("div",va," 已選擇 "+n(g.value.length)+" 筆提現，總金額 $"+n(k(ue.value)),1),l("div",ya,[e(f,{type:"success",onClick:be},{default:a(()=>[e(u,null,{default:a(()=>[e(p(de))]),_:1}),t[31]||(t[31]=i(" 批量通過 ",-1))]),_:1}),e(f,{type:"danger",onClick:Ee},{default:a(()=>[e(u,null,{default:a(()=>[e(p(mt))]),_:1}),t[32]||(t[32]=i(" 批量拒絕 ",-1))]),_:1}),e(f,{onClick:ke},{default:a(()=>[e(u,null,{default:a(()=>[e(p(N))]),_:1}),t[33]||(t[33]=i(" 分配審核員 ",-1))]),_:1})])]),_:1})):q("",!0),e(Ie,{modelValue:T.value,"onUpdate:modelValue":t[14]||(t[14]=s=>T.value=s),title:"提現審核",width:"800px","close-on-click-modal":!1},{footer:a(()=>[e(f,{onClick:t[13]||(t[13]=s=>T.value=!1)},{default:a(()=>[...t[41]||(t[41]=[i("取消",-1)])]),_:1}),e(f,{type:"primary",onClick:ye,loading:I.value},{default:a(()=>[...t[42]||(t[42]=[i(" 提交審核 ",-1)])]),_:1},8,["loading"])]),default:a(()=>[r.value?(C(),x("div",ga,[e(Me,{title:"提現詳情",column:2,border:""},{default:a(()=>[e(D,{label:"提現ID"},{default:a(()=>[i(n(r.value.id),1)]),_:1}),e(D,{label:"用戶"},{default:a(()=>[i(n(r.value.user.username)+" ("+n(r.value.user.email)+") ",1)]),_:1}),e(D,{label:"提現金額"},{default:a(()=>[i(" $"+n(k(r.value.amount)),1)]),_:1}),e(D,{label:"手續費"},{default:a(()=>[i(" $"+n(k(r.value.fee)),1)]),_:1}),e(D,{label:"實際到賬"},{default:a(()=>[i(" $"+n(k(r.value.amount-r.value.fee)),1)]),_:1}),e(D,{label:"收款方式"},{default:a(()=>[i(n(r.value.paymentMethod),1)]),_:1}),e(D,{label:"收款賬戶",span:2},{default:a(()=>[i(n(r.value.paymentAccount),1)]),_:1}),e(D,{label:"提交時間"},{default:a(()=>[i(n(p(B)(r.value.createdAt).format("YYYY-MM-DD HH:mm:ss")),1)]),_:1}),e(D,{label:"等待時間"},{default:a(()=>[i(n(W(r.value.waitTime)),1)]),_:1})]),_:1}),l("div",ba,[t[34]||(t[34]=l("h4",null,"風險評估",-1)),e(Te,{title:R(r.value).title,type:R(r.value).type,description:R(r.value).description,"show-icon":"",closable:!1},null,8,["title","type","description"])]),l("div",Ea,[t[40]||(t[40]=l("h4",null,"審核決定",-1)),e(te,{model:_,"label-width":"100px"},{default:a(()=>[e(h,{label:"審核結果",required:""},{default:a(()=>[e(le,{modelValue:_.decision,"onUpdate:modelValue":t[10]||(t[10]=s=>_.decision=s)},{default:a(()=>[e($,{label:"APPROVED"},{default:a(()=>[...t[35]||(t[35]=[i("通過",-1)])]),_:1}),e($,{label:"REJECTED"},{default:a(()=>[...t[36]||(t[36]=[i("拒絕",-1)])]),_:1}),e($,{label:"HOLD"},{default:a(()=>[...t[37]||(t[37]=[i("暫緩",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(h,{label:"審核備註",required:_.decision==="REJECTED"||_.decision==="HOLD"},{default:a(()=>[e(L,{modelValue:_.remarks,"onUpdate:modelValue":t[11]||(t[11]=s=>_.remarks=s),type:"textarea",rows:4,placeholder:"請填寫審核備註（拒絕或暫緩時必填）"},null,8,["modelValue"])]),_:1},8,["required"]),_.decision==="APPROVED"?(C(),j(h,{key:0,label:"處理方式"},{default:a(()=>[e(le,{modelValue:_.processType,"onUpdate:modelValue":t[12]||(t[12]=s=>_.processType=s)},{default:a(()=>[e($,{label:"AUTO"},{default:a(()=>[...t[38]||(t[38]=[i("自動處理",-1)])]),_:1}),e($,{label:"MANUAL"},{default:a(()=>[...t[39]||(t[39]=[i("手動處理",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})):q("",!0)]),_:1},8,["model"])])])):q("",!0)]),_:1},8,["modelValue"])])}}}),Ra=Oe(ka,[["__scopeId","data-v-7599b1b8"]]);export{Ra as default};
