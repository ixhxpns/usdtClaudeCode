var S=(D,Y,i)=>new Promise((y,n)=>{var l=_=>{try{x(i.next(_))}catch(h){n(h)}},E=_=>{try{x(i.throw(_))}catch(h){n(h)}},x=_=>_.done?y(_.value):Promise.resolve(_.value).then(l,E);x((i=i.apply(D,Y)).next())});import{a9 as $,n as ee,aa as te,A as se,y as ae,h as re,j as ne,x as le,a7 as oe,a8 as ce,ab as ue,ac as de,ad as ie,P as pe,S as _e,k as me,ae as fe,a as ve,E as g}from"./element-plus-BimyLctg.js";import{d as ge,aQ as ye,r as K,c as f,o as xe,f as p,j as o,k as s,K as m,Q as a,H as r,J as he,G as b,L as be,O as c,M as d,P as ke,aj as we,u as Ce}from"./vue-vendor-D1tpuXMX.js";import{g as je,r as Ke}from"./kyc-C9ZWcgtY.js";import{_ as Ye}from"./index-CNq4hTTw.js";import"./vendor-CPjYCZhe.js";const Ee={class:"kyc-status-view"},Se={class:"mt-6"},De={class:"flex items-center justify-between"},Ie={class:"flex items-center space-x-4"},Me={class:"text-xl font-semibold text-gray-900 dark:text-white"},Ne={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},ze={class:"flex space-x-3"},Ve={key:0,class:"mt-6"},Be={class:"flex items-center justify-between"},Le={class:"text-sm text-gray-500"},Te={key:1,class:"mt-6"},Ae={class:"space-y-6"},Re={key:0},Oe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Pe={class:"text-center"},Fe={class:"document-preview mb-3"},Qe={key:1,class:"w-full h-32 bg-gray-100 dark:bg-gray-700 rounded-md flex items-center justify-center"},Ue={class:"text-sm font-medium text-gray-900 dark:text-white"},Ge={class:"text-xs text-gray-500 mt-1"},He={class:"mt-2"},Je={key:1},qe={key:2,class:"mt-6"},We={key:3,class:"flex justify-center items-center py-12"},Xe=ge({__name:"KYCStatusView",setup(D){const Y=ye(),i=K(!1),y=K(!1),n=K(null),l=K("not_submitted"),E=f(()=>{switch(l.value){case"approved":return ae;case"pending":return se;case"rejected":return te;case"under_review":return ee;default:return $}}),x=f(()=>{switch(l.value){case"approved":return"bg-green-100 text-green-600 dark:bg-green-900 dark:text-green-400";case"pending":return"bg-blue-100 text-blue-600 dark:bg-blue-900 dark:text-blue-400";case"rejected":return"bg-red-100 text-red-600 dark:bg-red-900 dark:text-red-400";case"under_review":return"bg-yellow-100 text-yellow-600 dark:bg-yellow-900 dark:text-yellow-400";default:return"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"}}),_=f(()=>{switch(l.value){case"approved":return"KYC 验证已通过";case"pending":return"KYC 验证待审核";case"rejected":return"KYC 验证未通过";case"under_review":return"KYC 验证审核中";default:return"未提交 KYC 验证"}}),h=f(()=>{switch(l.value){case"approved":return"恭喜！您的身份验证已通过，可以使用所有平台功能";case"pending":return"您的KYC资料已提交，正在等待系统处理";case"rejected":return"您的KYC资料审核未通过，请查看反馈并重新提交";case"under_review":return"您的KYC资料正在人工审核中，请耐心等待";default:return"完成身份验证后可使用交易和提现功能"}}),z=f(()=>{switch(l.value){case"pending":return 1;case"under_review":return 2;case"approved":return 4;case"rejected":return 2;default:return 0}}),V=f(()=>l.value==="rejected"?"error":"process"),B=f(()=>{switch(l.value){case"pending":return 25;case"under_review":return 75;case"approved":return 100;case"rejected":return 50;default:return 0}}),L=()=>S(this,null,function*(){var t;try{i.value=!0;const e=yield je();e.data.success?(n.value=e.data.data,l.value=((t=e.data.data)==null?void 0:t.status)||"not_submitted"):g.error(e.data.message||"获取KYC状态失败")}catch(e){console.error("获取KYC状态失败:",e),g.error("获取KYC状态失败，请稍后重试")}finally{i.value=!1}}),T=()=>S(this,null,function*(){var t;try{y.value=!0;const e=yield Ke();e.data.success?(n.value=e.data.data,l.value=((t=e.data.data)==null?void 0:t.status)||"not_submitted",g.success("状态已刷新")):g.error(e.data.message||"刷新状态失败")}catch(e){console.error("刷新状态失败:",e),g.error("刷新状态失败，请稍后重试")}finally{y.value=!1}}),I=()=>{Y.push("/kyc/submit")},A=()=>{g.info("文档查看功能开发中")},R=t=>t?t.length<=6?t:t.slice(0,3)+"****"+t.slice(-3):"-",O=t=>t?new Date(t).toLocaleDateString("zh-CN"):"-",M=t=>t?new Date(t).toLocaleString("zh-CN"):"-",P=t=>{const e=[".jpg",".jpeg",".png",".gif",".bmp",".webp"],k=t.toLowerCase().substring(t.lastIndexOf("."));return e.includes(k)},F=t=>({id_card_front:"身份证正面",id_card_back:"身份证背面",passport:"护照",driver_license:"驾驶证",selfie:"手持身份证照片",proof_of_address:"地址证明"})[t]||t,Q=t=>({pending:"待审核",approved:"已通过",rejected:"未通过",under_review:"审核中"})[t]||t,U=t=>({pending:"info",approved:"success",rejected:"danger",under_review:"warning"})[t]||"info";return xe(()=>{L()}),(t,e)=>{const k=re,w=ne,C=le,j=ce,G=oe,v=de,H=ue,J=ie,q=_e,W=me,X=fe,Z=ve;return o(),p("div",Ee,[e[8]||(e[8]=s("div",{class:"page-header"},[s("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"KYC 验证状态"),s("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"},"查看您的身份验证状态和进度")],-1)),s("div",Se,[a(C,{class:"status-card","body-style":{padding:"24px"}},{default:r(()=>{var u,N;return[s("div",De,[s("div",Ie,[s("div",{class:he(["status-icon",x.value])},[a(k,{size:32},{default:r(()=>[(o(),b(be(E.value)))]),_:1})],2),s("div",null,[s("h2",Me,c(_.value),1),s("p",Ne,c(h.value),1)])]),s("div",ze,[l.value==="not_submitted"||l.value==="rejected"?(o(),b(w,{key:0,type:"primary",onClick:I,loading:i.value},{default:r(()=>[d(c(l.value==="not_submitted"?"开始认证":"重新提交"),1)]),_:1},8,["loading"])):m("",!0),l.value==="pending"&&((N=(u=n.value)==null?void 0:u.documents)==null?void 0:N.length)>0?(o(),b(w,{key:1,onClick:A},{default:r(()=>[...e[0]||(e[0]=[d(" 查看文档 ",-1)])]),_:1})):m("",!0),a(w,{onClick:T,loading:y.value},{default:r(()=>[...e[1]||(e[1]=[d(" 刷新状态 ",-1)])]),_:1},8,["loading"])])])]}),_:1})]),l.value!=="not_submitted"?(o(),p("div",Ve,[a(C,null,{header:r(()=>[s("div",Be,[e[2]||(e[2]=s("span",{class:"text-lg font-medium"},"验证进度",-1)),s("span",Le,c(B.value)+"%",1)])]),default:r(()=>[a(G,{active:z.value,"process-status":V.value,"finish-status":"success"},{default:r(()=>[a(j,{title:"提交资料",description:"上传身份证明文件"}),a(j,{title:"初步审核",description:"系统自动验证文件"}),a(j,{title:"人工审核",description:"专业团队人工审核"}),a(j,{title:"审核完成",description:"验证完成"})]),_:1},8,["active","process-status"])]),_:1})])):m("",!0),n.value?(o(),p("div",Te,[a(C,null,{header:r(()=>[...e[3]||(e[3]=[s("span",{class:"text-lg font-medium"},"KYC 详细信息",-1)])]),default:r(()=>[s("div",Ae,[s("div",null,[e[4]||(e[4]=s("h3",{class:"text-base font-medium text-gray-900 dark:text-white mb-4"},"基本信息",-1)),a(H,{column:2,border:""},{default:r(()=>[a(v,{label:"姓名"},{default:r(()=>[d(c(n.value.fullName||"-"),1)]),_:1}),a(v,{label:"身份证号"},{default:r(()=>[d(c(R(n.value.idNumber)),1)]),_:1}),a(v,{label:"出生日期"},{default:r(()=>[d(c(O(n.value.dateOfBirth)),1)]),_:1}),a(v,{label:"国籍"},{default:r(()=>[d(c(n.value.nationality||"-"),1)]),_:1}),a(v,{label:"提交时间"},{default:r(()=>[d(c(M(n.value.submittedAt)),1)]),_:1}),n.value.reviewedAt?(o(),b(v,{key:0,label:"审核时间"},{default:r(()=>[d(c(M(n.value.reviewedAt)),1)]),_:1})):m("",!0)]),_:1})]),n.value.documents&&n.value.documents.length>0?(o(),p("div",Re,[e[5]||(e[5]=s("h3",{class:"text-base font-medium text-gray-900 dark:text-white mb-4"},"上传文档",-1)),s("div",Oe,[(o(!0),p(ke,null,we(n.value.documents,u=>(o(),p("div",{key:u.id,class:"document-card"},[a(C,{class:"h-full","body-style":{padding:"16px"}},{default:r(()=>[s("div",Pe,[s("div",Fe,[P(u.fileName)?(o(),b(J,{key:0,src:u.fileUrl,"preview-src-list":[u.fileUrl],fit:"cover",class:"w-full h-32 rounded-md","hide-on-click-modal":!0},null,8,["src","preview-src-list"])):(o(),p("div",Qe,[a(k,{size:40,class:"text-gray-400"},{default:r(()=>[a(Ce(pe))]),_:1})]))]),s("p",Ue,c(F(u.type)),1),s("p",Ge,c(u.fileName),1),s("div",He,[a(q,{type:U(u.status),size:"small"},{default:r(()=>[d(c(Q(u.status)),1)]),_:2},1032,["type"])])])]),_:2},1024)]))),128))])])):m("",!0),n.value.rejectionReason?(o(),p("div",Je,[e[6]||(e[6]=s("h3",{class:"text-base font-medium text-gray-900 dark:text-white mb-4"},"审核反馈",-1)),a(W,{title:l.value==="rejected"?"审核未通过":"需要补充材料",description:n.value.rejectionReason,type:"warning",closable:!1,"show-icon":""},null,8,["title","description"])])):m("",!0)])]),_:1})])):m("",!0),!n.value&&!i.value?(o(),p("div",qe,[a(X,{description:"暂无KYC数据","image-size":200},{default:r(()=>[a(w,{type:"primary",onClick:I},{default:r(()=>[...e[7]||(e[7]=[d(" 开始KYC认证 ",-1)])]),_:1})]),_:1})])):m("",!0),i.value?(o(),p("div",We,[a(Z)])):m("",!0)])}}}),rt=Ye(Xe,[["__scopeId","data-v-409d9f24"]]);export{rt as default};
