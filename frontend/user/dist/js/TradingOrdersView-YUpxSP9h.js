var C=(D,b,_)=>new Promise((i,m)=>{var r=p=>{try{v(_.next(p))}catch(c){m(c)}},h=p=>{try{v(_.throw(p))}catch(c){m(c)}},v=p=>p.done?i(p.value):Promise.resolve(p.value).then(r,h);v((_=_.apply(D,b)).next())});import{V as X,W as ee,Z as te,_ as le,g as ae,j as se,a3 as ne,a4 as oe,S as ie,at as re,a6 as de,x as ue,ab as pe,ac as ce,v as me,a1 as B,E as k}from"./element-plus-BimyLctg.js";import{aN as _e}from"./vendor-CPjYCZhe.js";import{d as fe,r as V,_ as O,o as ge,f as U,j,Q as e,H as t,k as g,M as n,O as o,K as be}from"./vue-vendor-D1tpuXMX.js";import{_ as ve}from"./index-CNq4hTTw.js";const ye={class:"trading-orders-view"},xe={class:"card-header flex justify-between items-center"},ze={class:"flex items-center space-x-2"},he={class:"filters mb-4"},we={class:"text-xs text-gray-500 mt-1"},Ce={class:"flex space-x-2"},Ve={class:"pagination-wrapper mt-4 flex justify-center"},Ee={key:0,class:"order-details"},ke=fe({__name:"TradingOrdersView",setup(D){const b=V(!1),_=V(!1),i=V(null),m=O({type:"",side:"",pair:""}),r=O({current:1,pageSize:20,total:0}),h=V([]),v=a=>_e(a).format("YYYY-MM-DD HH:mm:ss"),p=a=>(a==null?void 0:a.toFixed(8))||"0.00000000",c=a=>(a==null?void 0:a.toFixed(6))||"0.000000",E=a=>!a.amount||a.amount===0?0:Math.round(a.filled/a.amount*100),T=a=>({open:"warning",partial:"info",filled:"success",cancelled:"danger"})[a]||"info",S=a=>({open:"等待成交",partial:"部分成交",filled:"完全成交",cancelled:"已取消"})[a]||a,P=a=>["open","partial"].includes(a),N=()=>{r.current=1,f()},I=a=>{r.pageSize=a,f()},Y=a=>{r.current=a,f()},F=a=>{i.value=a,_.value=!0},H=a=>C(this,null,function*(){try{yield B.confirm(`确定要取消订单 ${a.id} 吗？`,"确认取消",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),k.success("订单取消成功"),f()}catch(s){console.error("取消订单失败:",s)}}),$=()=>C(this,null,function*(){try{yield B.confirm("确定要取消所有当前订单吗？此操作不可逆！","确认取消全部",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),k.success("所有订单已取消"),f()}catch(a){console.error("取消全部订单失败:",a)}}),A=()=>{f()},f=()=>C(this,null,function*(){try{b.value=!0,yield new Promise(a=>setTimeout(a,1e3)),h.value=[{id:"ORD001",time:"2024-01-20 10:30:00",pair:"USDT/USDC",type:"limit",side:"buy",price:1.0001,amount:1e3,filled:500,remaining:500,status:"partial"}],r.total=1}catch(a){console.error("加载订单失败:",a),k.error("加载数据失败")}finally{b.value=!1}});return ge(()=>{f()}),(a,s)=>{const z=se,y=le,M=te,w=ee,R=ae,K=X,d=oe,x=ie,Q=re,W=ne,Z=de,q=ue,u=ce,G=pe,J=me;return j(),U("div",ye,[e(q,null,{header:t(()=>[g("div",xe,[s[8]||(s[8]=g("h3",{class:"text-lg font-medium"},"当前订单",-1)),g("div",ze,[e(z,{onClick:A,loading:b.value,size:"small"},{default:t(()=>[...s[6]||(s[6]=[n(" 刷新 ",-1)])]),_:1},8,["loading"]),e(z,{onClick:$,type:"danger",size:"small"},{default:t(()=>[...s[7]||(s[7]=[n(" 取消全部 ",-1)])]),_:1})])])]),default:t(()=>[g("div",he,[e(K,{gutter:16},{default:t(()=>[e(w,{span:6},{default:t(()=>[e(M,{modelValue:m.type,"onUpdate:modelValue":s[0]||(s[0]=l=>m.type=l),placeholder:"订单类型",clearable:"",size:"small"},{default:t(()=>[e(y,{label:"全部",value:""}),e(y,{label:"限价单",value:"limit"}),e(y,{label:"市价单",value:"market"})]),_:1},8,["modelValue"])]),_:1}),e(w,{span:6},{default:t(()=>[e(M,{modelValue:m.side,"onUpdate:modelValue":s[1]||(s[1]=l=>m.side=l),placeholder:"买卖方向",clearable:"",size:"small"},{default:t(()=>[e(y,{label:"全部",value:""}),e(y,{label:"买入",value:"buy"}),e(y,{label:"卖出",value:"sell"})]),_:1},8,["modelValue"])]),_:1}),e(w,{span:6},{default:t(()=>[e(R,{modelValue:m.pair,"onUpdate:modelValue":s[2]||(s[2]=l=>m.pair=l),placeholder:"交易对",clearable:"",size:"small"},null,8,["modelValue"])]),_:1}),e(w,{span:6},{default:t(()=>[e(z,{type:"primary",onClick:N,size:"small"},{default:t(()=>[...s[9]||(s[9]=[n(" 筛选 ",-1)])]),_:1})]),_:1})]),_:1})]),e(W,{data:h.value,loading:b.value,stripe:""},{default:t(()=>[e(d,{prop:"time",label:"时间",width:"160"},{default:t(({row:l})=>[n(o(v(l.time)),1)]),_:1}),e(d,{prop:"pair",label:"交易对",width:"120"}),e(d,{prop:"type",label:"类型",width:"80"},{default:t(({row:l})=>[e(x,{size:"small"},{default:t(()=>[n(o(l.type==="limit"?"限价":"市价"),1)]),_:2},1024)]),_:1}),e(d,{prop:"side",label:"方向",width:"80"},{default:t(({row:l})=>[e(x,{type:l.side==="buy"?"success":"danger",size:"small"},{default:t(()=>[n(o(l.side==="buy"?"买入":"卖出"),1)]),_:2},1032,["type"])]),_:1}),e(d,{prop:"price",label:"价格",width:"120",align:"right"},{default:t(({row:l})=>[n(o(l.type==="market"?"市价":p(l.price)),1)]),_:1}),e(d,{prop:"amount",label:"数量",width:"120",align:"right"},{default:t(({row:l})=>[n(o(c(l.amount)),1)]),_:1}),e(d,{prop:"filled",label:"已成交",width:"120",align:"right"},{default:t(({row:l})=>[n(o(c(l.filled)),1)]),_:1}),e(d,{prop:"remaining",label:"剩余",width:"120",align:"right"},{default:t(({row:l})=>[n(o(c(l.remaining)),1)]),_:1}),e(d,{label:"进度",width:"120"},{default:t(({row:l})=>[e(Q,{percentage:E(l),"stroke-width":6,"show-text":!1},null,8,["percentage"]),g("div",we,o(E(l))+"% ",1)]),_:1}),e(d,{prop:"status",label:"状态",width:"100"},{default:t(({row:l})=>[e(x,{type:T(l.status),size:"small"},{default:t(()=>[n(o(S(l.status)),1)]),_:2},1032,["type"])]),_:1}),e(d,{label:"操作",width:"140"},{default:t(({row:l})=>[g("div",Ce,[e(z,{link:"",type:"primary",onClick:L=>F(l),size:"small"},{default:t(()=>[...s[10]||(s[10]=[n(" 详情 ",-1)])]),_:2},1032,["onClick"]),e(z,{link:"",type:"danger",onClick:L=>H(l),size:"small",disabled:!P(l.status)},{default:t(()=>[...s[11]||(s[11]=[n(" 取消 ",-1)])]),_:2},1032,["onClick","disabled"])])]),_:1})]),_:1},8,["data","loading"]),g("div",Ve,[e(Z,{"current-page":r.current,"onUpdate:currentPage":s[3]||(s[3]=l=>r.current=l),"page-size":r.pageSize,"onUpdate:pageSize":s[4]||(s[4]=l=>r.pageSize=l),"page-sizes":[10,20,50,100],total:r.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:I,onCurrentChange:Y},null,8,["current-page","page-size","total"])])]),_:1}),e(J,{modelValue:_.value,"onUpdate:modelValue":s[5]||(s[5]=l=>_.value=l),title:"订单详情",width:"600px"},{default:t(()=>[i.value?(j(),U("div",Ee,[e(G,{column:2,border:""},{default:t(()=>[e(u,{label:"订单ID"},{default:t(()=>[n(o(i.value.id),1)]),_:1}),e(u,{label:"交易对"},{default:t(()=>[n(o(i.value.pair),1)]),_:1}),e(u,{label:"类型"},{default:t(()=>[e(x,null,{default:t(()=>[n(o(i.value.type==="limit"?"限价单":"市价单"),1)]),_:1})]),_:1}),e(u,{label:"方向"},{default:t(()=>[e(x,{type:i.value.side==="buy"?"success":"danger"},{default:t(()=>[n(o(i.value.side==="buy"?"买入":"卖出"),1)]),_:1},8,["type"])]),_:1}),e(u,{label:"委托价格"},{default:t(()=>[n(o(i.value.type==="market"?"市价":p(i.value.price)),1)]),_:1}),e(u,{label:"委托数量"},{default:t(()=>[n(o(c(i.value.amount)),1)]),_:1}),e(u,{label:"已成交"},{default:t(()=>[n(o(c(i.value.filled)),1)]),_:1}),e(u,{label:"剩余数量"},{default:t(()=>[n(o(c(i.value.remaining)),1)]),_:1}),e(u,{label:"成交进度"},{default:t(()=>[n(o(E(i.value))+"% ",1)]),_:1}),e(u,{label:"状态"},{default:t(()=>[e(x,{type:T(i.value.status)},{default:t(()=>[n(o(S(i.value.status)),1)]),_:1},8,["type"])]),_:1}),e(u,{label:"创建时间"},{default:t(()=>[n(o(v(i.value.time)),1)]),_:1})]),_:1})])):be("",!0)]),_:1},8,["modelValue"])])}}}),Oe=ve(ke,[["__scopeId","data-v-e82e56ac"]]);export{Oe as default};
