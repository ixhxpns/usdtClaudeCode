var j=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var N=(x,V)=>{var i={};for(var u in x)le.call(x,u)&&V.indexOf(u)<0&&(i[u]=x[u]);if(x!=null&&j)for(var u of j(x))V.indexOf(u)<0&&re.call(x,u)&&(i[u]=x[u]);return i};var F=(x,V,i)=>new Promise((u,C)=>{var q=p=>{try{b(i.next(p))}catch(w){C(w)}},z=p=>{try{b(i.throw(p))}catch(w){C(w)}},b=p=>p.done?u(p.value):Promise.resolve(p.value).then(q,z);b((i=i.apply(x,V)).next())});import{c as te,f as oe,g as ie,u as ne,h as de,p as B,q as $,m as ue,l as G,t as me,i as pe,j as fe,n as ge,o as D,s as ve,v as xe,E as A}from"./element-plus-BimyLctg.js";import{d as ce,aQ as be,r as v,_ as we,c as ye,w as _e,an as ke,f as S,j as f,Q as a,H as l,u as o,Y as Ve,k as r,K as P,M as m,G as E,J as H,O as Q,P as J,aj as Ee,L as Ce}from"./vue-vendor-D1tpuXMX.js";import{u as Ue,A as I,_ as Le}from"./index-CNq4hTTw.js";import{A as Ae}from"./AuthLayout-BYquXUgD.js";import{P as Se}from"./PasswordStrengthMeter-D5d-th8Y.js";import{V as qe}from"./VerificationCodeInput-C7bNLV10.js";import{b as ze,c as Re,a as K,v as O}from"./validators-CjzGUDfk.js";import"./vendor-CPjYCZhe.js";const Fe={class:"text-sm text-gray-600 dark:text-gray-400"},Pe={class:"flex space-x-2"},Be={class:"text-sm text-gray-600 dark:text-gray-400"},$e={key:0},De={key:1},Ie={class:"text-center space-y-4"},Me={class:"social-login-placeholder"},Te={class:"flex justify-center space-x-4"},je={class:"security-notice bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4"},Ne={class:"flex items-center space-x-2 mb-2"},Ge=ce({__name:"RegisterView",setup(x){const V=be(),i=Ue(),u=v(),C=v(!1),q=v(!1),z=v(!1),b=v(""),p=v(!1),w=v(!1),y=v(""),U=v(""),c=v(""),L=v(""),Y=[{name:"Google",icon:D},{name:"Apple",icon:D},{name:"GitHub",icon:D}],s=we({username:"",email:"",password:"",confirm_password:"",phone:"",verification_code:"",agree_terms:!1}),W=ye(()=>s.username&&s.email&&s.password&&s.confirm_password&&s.verification_code&&s.agree_terms&&y.value==="valid"&&c.value==="valid"&&s.password===s.confirm_password),X={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:4,max:20,message:"用户名长度应在4-20字符之间",trigger:"blur"},{validator:(d,e,n)=>{e&&!O(e)?n(new Error("用户名只能包含字母、数字和下划线")):n()},trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{validator:(d,e,n)=>{e&&!K(e)?n(new Error("请输入有效的邮箱地址")):n()},trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:8,message:"密码长度不能少于8位",trigger:"blur"},{validator:(d,e,n)=>{const g=Re(e);g.valid?n():n(new Error(g.message))},trigger:"blur"}],confirm_password:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(d,e,n)=>{e!==s.password?n(new Error("两次输入的密码不一致")):n()},trigger:"blur"}],phone:[{validator:(d,e,n)=>{e&&!ze(e)?n(new Error("请输入有效的手机号码")):n()},trigger:"blur"}],verification_code:[{required:!0,message:"请输入验证码",trigger:"blur"},{len:6,message:"验证码长度为6位",trigger:"blur"}],agree_terms:[{validator:(d,e,n)=>{e?n():n(new Error("请阅读并同意用户协议"))},trigger:"change"}]},Z=()=>F(this,null,function*(){if(!s.username||!O(s.username)){y.value="",U.value="";return}try{q.value=!0,(yield I.checkUsernameAvailability(s.username)).available?(y.value="valid",U.value="用户名可用"):(y.value="invalid",U.value="用户名已被使用")}catch(d){y.value="invalid",U.value="检查用户名可用性失败"}finally{q.value=!1}}),h=()=>F(this,null,function*(){if(!s.email||!K(s.email)){c.value="",L.value="";return}try{z.value=!0,(yield I.checkEmailAvailability(s.email)).available?(c.value="valid",L.value="邮箱可用"):(c.value="invalid",L.value="邮箱已被注册")}catch(d){c.value="invalid",L.value="检查邮箱可用性失败"}finally{z.value=!1}}),ee=()=>F(this,null,function*(){if(!s.email||c.value!=="valid"){A.warning("请先输入有效的邮箱地址");return}try{C.value=!0,yield I.sendEmailVerification({email:s.email}),A.success("验证码已发送到您的邮箱"),b.value=""}catch(d){A.error(d.message||"发送验证码失败"),b.value=d.message||"发送验证码失败"}finally{C.value=!1}}),se=d=>{s.verification_code=d,b.value=""},M=()=>F(this,null,function*(){if(u.value)try{if(yield u.value.validate(),y.value!=="valid"){A.error("请确认用户名可用");return}if(c.value!=="valid"){A.error("请确认邮箱可用");return}const d=s,{username:e}=d,n=N(d,["username"]);yield i.register(n),A.success("注册成功，欢迎加入我们！"),i.isEmailVerified?V.push("/dashboard"):V.push("/verify-email")}catch(e){console.error("注册失败:",e),b.value=e.message||"注册失败"}});return _e(()=>s.password,()=>{s.confirm_password&&u.value&&u.value.validateField("confirm_password")}),(d,e)=>{const n=ke("router-link"),g=de,R=ie,_=oe,k=fe,ae=pe,T=xe;return f(),S(J,null,[a(Ae,{"form-title":"创建新账户","form-subtitle":"开始您的数字资产交易之旅",loading:o(i).isLoading,"loading-text":"注册中，请稍候..."},{navigation:l(()=>[r("p",Fe,[e[16]||(e[16]=m(" 已有账户？ ",-1)),a(n,{to:"/login",class:"font-medium text-blue-600 hover:text-blue-500 dark:text-blue-400 transition-colors"},{default:l(()=>[...e[15]||(e[15]=[m(" 立即登录 ",-1)])]),_:1})])]),footer:l(()=>[r("div",Ie,[r("div",Me,[e[27]||(e[27]=r("div",{class:"flex items-center space-x-4 mb-4"},[r("div",{class:"flex-1 h-px bg-gray-300 dark:bg-gray-600"}),r("span",{class:"text-xs text-gray-500 dark:text-gray-400"},"或"),r("div",{class:"flex-1 h-px bg-gray-300 dark:bg-gray-600"})],-1)),r("div",Te,[(f(),S(J,null,Ee(Y,t=>a(k,{key:t.name,disabled:!0,size:"large",class:"social-login-btn",title:`${t.name}登录（即将推出）`},{default:l(()=>[a(g,null,{default:l(()=>[(f(),E(Ce(t.icon)))]),_:2},1024)]),_:2},1032,["title"])),64))]),e[28]||(e[28]=r("p",{class:"text-xs text-gray-400 mt-2"},"社交登录功能即将推出",-1))]),r("div",je,[r("div",Ne,[a(g,{class:"text-blue-600",size:16},{default:l(()=>[a(o(ve))]),_:1}),e[29]||(e[29]=r("span",{class:"text-sm font-medium text-blue-900 dark:text-blue-100"},"安全提示",-1))]),e[30]||(e[30]=r("ul",{class:"text-xs text-blue-800 dark:text-blue-200 space-y-1"},[r("li",null,"• 我们采用银行级SSL加密保护您的数据"),r("li",null,"• 您的密码将经过RSA加密后传输"),r("li",null,"• 建议启用双因子认证提高账户安全性")],-1))]),e[31]||(e[31]=r("div",{class:"text-xs text-gray-500 dark:text-gray-400"},[r("p",null,"© 2024 USDT Trading. 保留所有权利."),r("p",{class:"mt-1"},"创建账户即表示您同意接收我们的服务通知邮件")],-1))])]),default:l(()=>[a(o(te),{ref_key:"registerFormRef",ref:u,model:s,rules:X,class:"space-y-6",onSubmit:Ve(M,["prevent"])},{default:l(()=>[a(_,{prop:"username",class:"form-group"},{default:l(()=>[e[17]||(e[17]=r("label",{class:"form-label"},[m(" 用户名 "),r("span",{class:"text-red-500"},"*")],-1)),a(R,{modelValue:s.username,"onUpdate:modelValue":e[0]||(e[0]=t=>s.username=t),size:"large",placeholder:"请输入用户名（4-20字符）","prefix-icon":o(ne),disabled:o(i).isLoading,loading:q.value,onBlur:Z},{suffix:l(()=>[y.value==="valid"?(f(),E(g,{key:0,class:"text-green-500"},{default:l(()=>[a(o(B))]),_:1})):y.value==="invalid"?(f(),E(g,{key:1,class:"text-red-500"},{default:l(()=>[a(o($))]),_:1})):P("",!0)]),_:1},8,["modelValue","prefix-icon","disabled","loading"]),U.value?(f(),S("div",{key:0,class:H(["mt-1 text-xs",y.value==="valid"?"text-green-600":"text-red-500"])},Q(U.value),3)):P("",!0)]),_:1}),a(_,{prop:"email",class:"form-group"},{default:l(()=>[e[18]||(e[18]=r("label",{class:"form-label"},[m(" 邮箱地址 "),r("span",{class:"text-red-500"},"*")],-1)),a(R,{modelValue:s.email,"onUpdate:modelValue":e[1]||(e[1]=t=>s.email=t),type:"email",size:"large",placeholder:"请输入邮箱地址","prefix-icon":o(ue),disabled:o(i).isLoading,loading:z.value,onBlur:h},{suffix:l(()=>[c.value==="valid"?(f(),E(g,{key:0,class:"text-green-500"},{default:l(()=>[a(o(B))]),_:1})):c.value==="invalid"?(f(),E(g,{key:1,class:"text-red-500"},{default:l(()=>[a(o($))]),_:1})):P("",!0)]),_:1},8,["modelValue","prefix-icon","disabled","loading"]),L.value?(f(),S("div",{key:0,class:H(["mt-1 text-xs",c.value==="valid"?"text-green-600":"text-red-500"])},Q(L.value),3)):P("",!0)]),_:1}),a(_,{prop:"password",class:"form-group"},{default:l(()=>[e[19]||(e[19]=r("label",{class:"form-label"},[m(" 密码 "),r("span",{class:"text-red-500"},"*")],-1)),a(R,{modelValue:s.password,"onUpdate:modelValue":e[2]||(e[2]=t=>s.password=t),type:"password",size:"large",placeholder:"请输入密码（至少8位）","prefix-icon":o(G),"show-password":"",disabled:o(i).isLoading},null,8,["modelValue","prefix-icon","disabled"]),a(Se,{password:s.password,"min-length":8,"require-uppercase":!0,"require-lowercase":!0,"require-numbers":!0,"require-special-chars":!0},null,8,["password"])]),_:1}),a(_,{prop:"confirm_password",class:"form-group"},{default:l(()=>[e[20]||(e[20]=r("label",{class:"form-label"},[m(" 确认密码 "),r("span",{class:"text-red-500"},"*")],-1)),a(R,{modelValue:s.confirm_password,"onUpdate:modelValue":e[3]||(e[3]=t=>s.confirm_password=t),type:"password",size:"large",placeholder:"请再次输入密码","prefix-icon":o(G),"show-password":"",disabled:o(i).isLoading},{suffix:l(()=>[s.confirm_password&&s.password===s.confirm_password?(f(),E(g,{key:0,class:"text-green-500"},{default:l(()=>[a(o(B))]),_:1})):s.confirm_password&&s.password!==s.confirm_password?(f(),E(g,{key:1,class:"text-red-500"},{default:l(()=>[a(o($))]),_:1})):P("",!0)]),_:1},8,["modelValue","prefix-icon","disabled"])]),_:1}),a(_,{prop:"phone",class:"form-group"},{default:l(()=>[e[21]||(e[21]=r("label",{class:"form-label"},[m(" 手机号码 "),r("span",{class:"text-gray-500 text-xs"},"（可选）")],-1)),a(R,{modelValue:s.phone,"onUpdate:modelValue":e[4]||(e[4]=t=>s.phone=t),size:"large",placeholder:"请输入手机号码","prefix-icon":o(me),disabled:o(i).isLoading},null,8,["modelValue","prefix-icon","disabled"])]),_:1}),a(_,{prop:"verification_code",class:"form-group"},{default:l(()=>[e[22]||(e[22]=r("label",{class:"form-label"},[m(" 邮箱验证码 "),r("span",{class:"text-red-500"},"*")],-1)),r("div",Pe,[a(qe,{modelValue:s.verification_code,"onUpdate:modelValue":e[5]||(e[5]=t=>s.verification_code=t),length:6,disabled:o(i).isLoading,error:b.value,"show-resend":!0,"resend-countdown":60,resending:C.value,hint:"请输入发送到您邮箱的6位验证码",onComplete:se,onResend:ee,class:"flex-1"},null,8,["modelValue","disabled","error","resending"])])]),_:1}),a(_,{prop:"agree_terms",class:"form-group"},{default:l(()=>[a(ae,{modelValue:s.agree_terms,"onUpdate:modelValue":e[8]||(e[8]=t=>s.agree_terms=t),disabled:o(i).isLoading,size:"large"},{default:l(()=>[r("span",Be,[e[25]||(e[25]=m(" 我已阅读并同意 ",-1)),a(k,{type:"text",onClick:e[6]||(e[6]=t=>p.value=!0),class:"p-0 text-blue-600 hover:text-blue-500"},{default:l(()=>[...e[23]||(e[23]=[m(" 《用户服务协议》 ",-1)])]),_:1}),e[26]||(e[26]=m(" 和 ",-1)),a(k,{type:"text",onClick:e[7]||(e[7]=t=>w.value=!0),class:"p-0 text-blue-600 hover:text-blue-500"},{default:l(()=>[...e[24]||(e[24]=[m(" 《隐私政策》 ",-1)])]),_:1})])]),_:1},8,["modelValue","disabled"])]),_:1}),a(_,{class:"form-group"},{default:l(()=>[a(k,{type:"primary",size:"large",class:"w-full register-button",loading:o(i).isLoading,disabled:!W.value,onClick:M},{loading:l(()=>[a(g,{class:"animate-spin"},{default:l(()=>[a(o(ge))]),_:1})]),default:l(()=>[o(i).isLoading?(f(),S("span",De,"创建中...")):(f(),S("span",$e,"创建账户"))]),_:1},8,["loading","disabled"])]),_:1})]),_:1},8,["model"])]),_:1},8,["loading"]),a(T,{modelValue:p.value,"onUpdate:modelValue":e[11]||(e[11]=t=>p.value=t),title:"用户服务协议",width:"80%","max-width":"800px"},{footer:l(()=>[a(k,{onClick:e[9]||(e[9]=t=>p.value=!1)},{default:l(()=>[...e[32]||(e[32]=[m("关闭",-1)])]),_:1}),a(k,{type:"primary",onClick:e[10]||(e[10]=t=>{p.value=!1,s.agree_terms=!0})},{default:l(()=>[...e[33]||(e[33]=[m(" 同意并关闭 ",-1)])]),_:1})]),default:l(()=>[e[34]||(e[34]=r("div",{class:"prose dark:prose-invert max-w-none"},[r("h3",null,"服务条款"),r("p",null,"欢迎使用USDT交易平台。请仔细阅读以下条款和条件...")],-1))]),_:1},8,["modelValue"]),a(T,{modelValue:w.value,"onUpdate:modelValue":e[14]||(e[14]=t=>w.value=t),title:"隐私政策",width:"80%","max-width":"800px"},{footer:l(()=>[a(k,{onClick:e[12]||(e[12]=t=>w.value=!1)},{default:l(()=>[...e[35]||(e[35]=[m("关闭",-1)])]),_:1}),a(k,{type:"primary",onClick:e[13]||(e[13]=t=>{w.value=!1,s.agree_terms=!0})},{default:l(()=>[...e[36]||(e[36]=[m(" 同意并关闭 ",-1)])]),_:1})]),default:l(()=>[e[37]||(e[37]=r("div",{class:"prose dark:prose-invert max-w-none"},[r("h3",null,"隐私政策"),r("p",null,"我们重视您的隐私权。本政策说明我们如何收集、使用和保护您的个人信息...")],-1))]),_:1},8,["modelValue"])],64)}}}),he=Le(Ge,[["__scopeId","data-v-53b365c6"]]);export{he as default};
