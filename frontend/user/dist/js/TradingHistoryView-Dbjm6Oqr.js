var U=(x,f,c)=>new Promise((r,y)=>{var _=u=>{try{g(c.next(u))}catch(b){y(b)}},i=u=>{try{g(c.throw(u))}catch(b){y(b)}},g=u=>u.done?r(u.value):Promise.resolve(u.value).then(_,i);g((c=c.apply(x,f)).next())});import{V as q,W as G,Z as J,_ as L,g as ee,j as te,a3 as ae,a4 as le,S as oe,a6 as se,X as ne,x as re,ab as ie,ac as ue,v as de,E as pe}from"./element-plus-BimyLctg.js";import{aN as ce}from"./vendor-CPjYCZhe.js";import{d as _e,r as V,_ as j,o as me,f as F,j as N,Q as e,H as t,k as h,M as s,O as n,K as fe}from"./vue-vendor-D1tpuXMX.js";import{_ as ge}from"./index-CNq4hTTw.js";const be={class:"trading-history-view"},ve={class:"card-header flex justify-between items-center"},ye={class:"flex items-center space-x-2"},Ve={class:"filters mb-4"},he={class:"pagination-wrapper mt-4 flex justify-center"},we={key:0,class:"order-details"},ze=_e({__name:"TradingHistoryView",setup(x){const f=V(!1),c=V(!1),r=V(null),y=V([]),_=j({type:"",status:"",pair:""}),i=j({current:1,pageSize:20,total:0}),g=V([]),u=a=>ce(a).format("YYYY-MM-DD HH:mm:ss"),b=a=>(a==null?void 0:a.toFixed(8))||"0.00000000",E=a=>(a==null?void 0:a.toFixed(6))||"0.000000",D=a=>(a==null?void 0:a.toFixed(2))||"0.00",S=a=>(a==null?void 0:a.toFixed(6))||"0.000000",T=a=>({completed:"success",partial:"warning",cancelled:"danger"})[a]||"info",k=a=>({completed:"已完成",partial:"部分成交",cancelled:"已取消"})[a]||a,H=()=>{v()},P=()=>{i.current=1,v()},B=a=>{i.pageSize=a,v()},I=a=>{i.current=a,v()},Y=a=>{r.value=a,c.value=!0},O=()=>{v()},v=()=>U(this,null,function*(){try{f.value=!0,yield new Promise(a=>setTimeout(a,1e3)),g.value=[{id:"TXN001",time:"2024-01-20 10:30:00",pair:"USDT/USDC",type:"buy",price:1.0001,amount:1e3,total:1000.1,fee:1,status:"completed"}],i.total=1}catch(a){console.error("加载交易历史失败:",a),pe.error("加载数据失败")}finally{f.value=!1}});return me(()=>{v()}),(a,o)=>{const R=ne,C=te,m=L,M=J,w=G,X=ee,A=q,d=le,z=oe,K=ae,Q=se,W=re,p=ue,Z=ie,$=de;return N(),F("div",be,[e(W,null,{header:t(()=>[h("div",ve,[o[8]||(o[8]=h("h3",{class:"text-lg font-medium"},"交易历史",-1)),h("div",ye,[e(R,{modelValue:y.value,"onUpdate:modelValue":o[0]||(o[0]=l=>y.value=l),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"small",onChange:H},null,8,["modelValue"]),e(C,{onClick:O,loading:f.value,size:"small"},{default:t(()=>[...o[7]||(o[7]=[s(" 刷新 ",-1)])]),_:1},8,["loading"])])])]),default:t(()=>[h("div",Ve,[e(A,{gutter:16},{default:t(()=>[e(w,{span:6},{default:t(()=>[e(M,{modelValue:_.type,"onUpdate:modelValue":o[1]||(o[1]=l=>_.type=l),placeholder:"交易类型",clearable:"",size:"small"},{default:t(()=>[e(m,{label:"全部",value:""}),e(m,{label:"买入",value:"buy"}),e(m,{label:"卖出",value:"sell"})]),_:1},8,["modelValue"])]),_:1}),e(w,{span:6},{default:t(()=>[e(M,{modelValue:_.status,"onUpdate:modelValue":o[2]||(o[2]=l=>_.status=l),placeholder:"状态",clearable:"",size:"small"},{default:t(()=>[e(m,{label:"全部",value:""}),e(m,{label:"已完成",value:"completed"}),e(m,{label:"部分成交",value:"partial"}),e(m,{label:"已取消",value:"cancelled"})]),_:1},8,["modelValue"])]),_:1}),e(w,{span:6},{default:t(()=>[e(X,{modelValue:_.pair,"onUpdate:modelValue":o[3]||(o[3]=l=>_.pair=l),placeholder:"交易对",clearable:"",size:"small"},null,8,["modelValue"])]),_:1}),e(w,{span:6},{default:t(()=>[e(C,{type:"primary",onClick:P,size:"small"},{default:t(()=>[...o[9]||(o[9]=[s(" 筛选 ",-1)])]),_:1})]),_:1})]),_:1})]),e(K,{data:g.value,loading:f.value,stripe:""},{default:t(()=>[e(d,{prop:"time",label:"时间",width:"160"},{default:t(({row:l})=>[s(n(u(l.time)),1)]),_:1}),e(d,{prop:"pair",label:"交易对",width:"120"}),e(d,{prop:"type",label:"类型",width:"80"},{default:t(({row:l})=>[e(z,{type:l.type==="buy"?"success":"danger",size:"small"},{default:t(()=>[s(n(l.type==="buy"?"买入":"卖出"),1)]),_:2},1032,["type"])]),_:1}),e(d,{prop:"price",label:"价格",width:"120",align:"right"},{default:t(({row:l})=>[s(n(b(l.price)),1)]),_:1}),e(d,{prop:"amount",label:"数量",width:"120",align:"right"},{default:t(({row:l})=>[s(n(E(l.amount)),1)]),_:1}),e(d,{prop:"total",label:"总额",width:"140",align:"right"},{default:t(({row:l})=>[s(n(D(l.total)),1)]),_:1}),e(d,{prop:"fee",label:"手续费",width:"100",align:"right"},{default:t(({row:l})=>[s(n(S(l.fee)),1)]),_:1}),e(d,{prop:"status",label:"状态",width:"100"},{default:t(({row:l})=>[e(z,{type:T(l.status),size:"small"},{default:t(()=>[s(n(k(l.status)),1)]),_:2},1032,["type"])]),_:1}),e(d,{label:"操作",width:"100"},{default:t(({row:l})=>[e(C,{link:"",type:"primary",onClick:Ce=>Y(l),size:"small"},{default:t(()=>[...o[10]||(o[10]=[s(" 详情 ",-1)])]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","loading"]),h("div",he,[e(Q,{"current-page":i.current,"onUpdate:currentPage":o[4]||(o[4]=l=>i.current=l),"page-size":i.pageSize,"onUpdate:pageSize":o[5]||(o[5]=l=>i.pageSize=l),"page-sizes":[10,20,50,100],total:i.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:B,onCurrentChange:I},null,8,["current-page","page-size","total"])])]),_:1}),e($,{modelValue:c.value,"onUpdate:modelValue":o[6]||(o[6]=l=>c.value=l),title:"交易详情",width:"600px"},{default:t(()=>[r.value?(N(),F("div",we,[e(Z,{column:2,border:""},{default:t(()=>[e(p,{label:"订单ID"},{default:t(()=>[s(n(r.value.id),1)]),_:1}),e(p,{label:"交易对"},{default:t(()=>[s(n(r.value.pair),1)]),_:1}),e(p,{label:"类型"},{default:t(()=>[e(z,{type:r.value.type==="buy"?"success":"danger"},{default:t(()=>[s(n(r.value.type==="buy"?"买入":"卖出"),1)]),_:1},8,["type"])]),_:1}),e(p,{label:"价格"},{default:t(()=>[s(n(b(r.value.price)),1)]),_:1}),e(p,{label:"数量"},{default:t(()=>[s(n(E(r.value.amount)),1)]),_:1}),e(p,{label:"总额"},{default:t(()=>[s(n(D(r.value.total)),1)]),_:1}),e(p,{label:"手续费"},{default:t(()=>[s(n(S(r.value.fee)),1)]),_:1}),e(p,{label:"状态"},{default:t(()=>[e(z,{type:T(r.value.status)},{default:t(()=>[s(n(k(r.value.status)),1)]),_:1},8,["type"])]),_:1}),e(p,{label:"创建时间"},{default:t(()=>[s(n(u(r.value.time)),1)]),_:1})]),_:1})])):fe("",!0)]),_:1},8,["modelValue"])])}}}),ke=ge(ze,[["__scopeId","data-v-f1ad35b2"]]);export{ke as default};
