var B=(q,H,x)=>new Promise((k,C)=>{var E=c=>{try{u(x.next(c))}catch(w){C(w)}},R=c=>{try{u(x.throw(c))}catch(w){C(w)}},u=c=>c.done?k(c.value):Promise.resolve(c.value).then(E,R);u((x=x.apply(q,H)).next())});import{h as Ve,O as Ne,x as Te,d as Se,e as Be,c as Re,f as je,Z as Ue,_ as $e,g as Fe,af as Ae,an as He,j as Ie,ao as Le,k as Me,ab as qe,ac as Oe,v as ze,a3 as Pe,a4 as We,S as Ge,a5 as Qe,ae as Ye,E as D}from"./element-plus-BimyLctg.js";import{d as Ke,aQ as Ze,r as m,_ as Je,c as T,o as Xe,f as p,j as i,k as t,K as y,Q as n,H as s,O as r,u as X,P as F,aj as A,G as g,M as d,I as et}from"./vue-vendor-D1tpuXMX.js";import{g as tt,a as at,c as st,b as lt}from"./wallet-Bpk4c6bO.js";import{_ as nt}from"./index-CNq4hTTw.js";import"./vendor-CPjYCZhe.js";const ot={class:"wallet-deposit-view"},rt={class:"mt-6"},it={class:"flex items-center justify-between"},dt={class:"text-3xl font-bold text-gray-900 dark:text-white"},ut={class:"balance-icon"},ct={class:"mt-6"},mt={class:"flex items-center space-x-3"},pt=["src","alt"],ft={class:"font-medium"},_t={class:"text-xs text-gray-500"},vt={key:0,class:"mt-6"},yt={class:"flex items-center justify-between"},gt={class:"text-sm text-gray-500"},bt={class:"mt-2 text-sm text-gray-500"},xt={key:0},kt={key:1},wt={class:"flex items-center justify-between"},Dt={class:"text-sm text-gray-500"},Ct={class:"mt-2"},Et={key:0,class:"mt-6"},ht={class:"space-y-3"},Vt={class:"flex justify-between"},Nt={class:"font-medium"},Tt={class:"flex justify-between"},St={class:"font-medium"},Bt={class:"flex justify-between text-lg font-semibold"},Rt={class:"mt-6 flex justify-end space-x-3"},jt={key:0,class:"crypto-guide"},Ut={class:"text-center mb-6"},$t={class:"text-lg font-medium mb-2"},Ft={class:"deposit-address-section"},At={class:"address-display"},Ht={class:"flex items-center justify-center space-x-2"},It={class:"mt-4 p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg"},Lt={class:"text-sm text-yellow-700 dark:text-yellow-300"},Mt={key:1,class:"bank-guide"},qt={class:"flex justify-between"},Ot={class:"mt-6"},zt={class:"flex items-center justify-between"},Pt={key:1},Wt=Ke({__name:"WalletDepositView",setup(q){const H=Ze(),x=m(),k=m(!1),C=m(!1),E=m(!1),R=m(0),u=m(""),c=m(""),w=m(""),l=Je({currency:"USDT",amount:"",network:"",bankCard:""}),ee=m([{id:"crypto",name:"加密货币充值",description:"使用USDT、BTC等加密货币充值",icon:"/images/crypto-icon.png",enabled:!0},{id:"bank",name:"银行转账",description:"通过银行卡转账充值",icon:"/images/bank-icon.png",enabled:!0},{id:"alipay",name:"支付宝",description:"使用支付宝快速充值",icon:"/images/alipay-icon.png",enabled:!1},{id:"wechat",name:"微信支付",description:"使用微信支付快速充值",icon:"/images/wechat-icon.png",enabled:!1}]),O=m([{code:"USDT",name:"Tether",balance:0,minDeposit:10,maxDeposit:1e5,exchangeRate:1},{code:"BTC",name:"Bitcoin",balance:0,minDeposit:.001,maxDeposit:10,exchangeRate:45e3},{code:"ETH",name:"Ethereum",balance:0,minDeposit:.01,maxDeposit:100,exchangeRate:3e3}]),z=m([{id:"trc20",name:"TRC20 (Tron)",fee:1,confirmations:1},{id:"erc20",name:"ERC20 (Ethereum)",fee:5,confirmations:12},{id:"bep20",name:"BEP20 (BSC)",fee:.5,confirmations:3}]),te=m([{id:"1",bankName:"中国银行",cardNumber:"1234567890123456"},{id:"2",bankName:"工商银行",cardNumber:"2345678901234567"}]),I=m([]),ae={currency:[{required:!0,message:"请选择币种",trigger:"change"}],amount:[{required:!0,message:"请输入充值金额",trigger:"blur"},{pattern:/^\d+(\.\d{1,8})?$/,message:"请输入有效的金额",trigger:"blur"}],network:[{required:!0,message:"请选择网络",trigger:"change"}],bankCard:[{required:!0,message:"请选择银行卡",trigger:"change"}]},_=T(()=>O.value.find(o=>o.code===l.currency)),j=T(()=>z.value.find(o=>o.id===l.network)),P=T(()=>{var o;return((o=_.value)==null?void 0:o.exchangeRate)||1}),W=T(()=>l.amount?u.value==="crypto"&&j.value?j.value.fee:u.value==="bank"?parseFloat(l.amount)*.001:0:0),se=T(()=>l.amount?parseFloat(l.amount)-W.value:0),le=T(()=>{if(!l.currency||!l.amount)return!1;const o=parseFloat(l.amount),e=_.value;return!(!e||o<e.minDeposit||o>e.maxDeposit||u.value==="crypto"&&!l.network||u.value==="bank"&&!l.bankCard)}),ne=()=>B(this,null,function*(){try{const o=yield tt();o.data.success&&(R.value=o.data.data.balance)}catch(o){console.error("获取钱包余额失败:",o)}}),G=()=>B(this,null,function*(){try{E.value=!0;const o=yield at({limit:5});o.data.success&&(I.value=o.data.data.records)}catch(o){console.error("获取充值记录失败:",o)}finally{E.value=!1}}),oe=()=>{l.network="",c.value=""},re=()=>B(this,null,function*(){try{if(!(yield x.value.validate()))return;C.value=!0;const e=yield st({currency:l.currency,amount:parseFloat(l.amount),method:u.value,network:l.network,bankCardId:l.bankCard});if(e.data.success){const b=e.data.data;if(w.value=b.orderNumber,u.value==="crypto"){const v=yield lt({currency:l.currency,network:l.network});v.data.success&&(c.value=v.data.data.address)}k.value=!0}else D.error(e.data.message||"创建充值订单失败")}catch(o){console.error("创建充值订单失败:",o),D.error("创建充值订单失败，请重试")}finally{C.value=!1}}),ie=()=>B(this,null,function*(){try{yield navigator.clipboard.writeText(c.value),D.success("地址已复制到剪贴板")}catch(o){D.error("复制失败")}}),de=()=>{k.value=!1,D.success("充值订单已提交，请等待到账"),Q(),G()},Q=()=>{l.currency="USDT",l.amount="",l.network="",l.bankCard="",c.value="",w.value=""},ue=()=>{D.info("添加银行卡功能开发中")},ce=()=>{H.push("/wallet/transactions?type=deposit")},me=o=>{D.info(`查看交易: ${o}`)},f=(o,e="USDT")=>{const b=typeof o=="string"?parseFloat(o):o;return isNaN(b)?"0":e==="CNY"?`¥${b.toLocaleString()}`:e==="USD"?`$${b.toLocaleString()}`:`${b.toLocaleString()} ${e}`},pe=o=>new Date(o).toLocaleString("zh-CN"),fe=o=>({crypto:"加密货币",bank:"银行转账",alipay:"支付宝",wechat:"微信支付"})[o]||o,_e=o=>({pending:"处理中",confirmed:"已确认",completed:"已完成",failed:"失败"})[o]||o,ve=o=>({pending:"warning",confirmed:"info",completed:"success",failed:"danger"})[o]||"info";return Xe(()=>{ne(),G()}),(o,e)=>{const b=Ve,v=Te,ye=Be,ge=Se,L=$e,M=Ue,U=je,Y=Fe,K=Ae,be=Re,xe=He,h=Ie,Z=Me,S=Oe,ke=qe,we=ze,V=We,De=Ge,Ce=Pe,Ee=Ye,he=Qe;return i(),p("div",ot,[e[38]||(e[38]=t("div",{class:"page-header"},[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"钱包充值"),t("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," 选择合适的充值方式向您的钱包充值 ")],-1)),t("div",rt,[n(v,{class:"balance-card"},{default:s(()=>[t("div",it,[t("div",null,[e[7]||(e[7]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400"},"当前余额",-1)),t("p",dt,r(f(R.value)),1)]),t("div",ut,[n(b,{size:40,class:"text-blue-500"},{default:s(()=>[n(X(Ne))]),_:1})])])]),_:1})]),t("div",ct,[n(v,null,{header:s(()=>[...e[8]||(e[8]=[t("span",{class:"text-lg font-medium"},"选择充值方式",-1)])]),default:s(()=>[n(ge,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=a=>u.value=a),size:"large",class:"deposit-methods"},{default:s(()=>[(i(!0),p(F,null,A(ee.value,a=>(i(),g(ye,{key:a.id,label:a.id,disabled:!a.enabled,class:"deposit-method-option"},{default:s(()=>[t("div",mt,[t("img",{src:a.icon,alt:a.name,class:"w-8 h-8"},null,8,pt),t("div",null,[t("div",ft,r(a.name),1),t("div",_t,r(a.description),1)])])]),_:2},1032,["label","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1})]),u.value?(i(),p("div",vt,[n(v,null,{header:s(()=>[...e[9]||(e[9]=[t("span",{class:"text-lg font-medium"},"充值信息",-1)])]),default:s(()=>[n(be,{ref_key:"formRef",ref:x,model:l,rules:ae,"label-width":"120px",size:"large"},{default:s(()=>[n(U,{label:"币种",prop:"currency"},{default:s(()=>[n(M,{modelValue:l.currency,"onUpdate:modelValue":e[1]||(e[1]=a=>l.currency=a),placeholder:"请选择币种",onChange:oe},{default:s(()=>[(i(!0),p(F,null,A(O.value,a=>(i(),g(L,{key:a.code,label:`${a.name} (${a.code})`,value:a.code},{default:s(()=>[t("div",yt,[t("span",null,r(a.name)+" ("+r(a.code)+")",1),t("span",gt," 余额: "+r(f(a.balance,a.code)),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),n(U,{label:"充值金额",prop:"amount"},{default:s(()=>{var a,N;return[n(Y,{modelValue:l.amount,"onUpdate:modelValue":e[2]||(e[2]=$=>l.amount=$),placeholder:"请输入充值金额",type:"number",min:((a=_.value)==null?void 0:a.minDeposit)||0,max:((N=_.value)==null?void 0:N.maxDeposit)||999999999},{append:s(()=>[d(r(l.currency),1)]),_:1},8,["modelValue","min","max"]),t("div",bt,[_.value?(i(),p("p",xt," 最小充值: "+r(f(_.value.minDeposit,l.currency))+" | 最大充值: "+r(f(_.value.maxDeposit,l.currency)),1)):y("",!0),l.amount&&P.value?(i(),p("p",kt," 约等于: "+r(f(parseFloat(l.amount)*P.value,"USD")),1)):y("",!0)])]}),_:1}),u.value==="crypto"?(i(),g(U,{key:0,label:"网络",prop:"network"},{default:s(()=>[n(M,{modelValue:l.network,"onUpdate:modelValue":e[3]||(e[3]=a=>l.network=a),placeholder:"请选择网络"},{default:s(()=>[(i(!0),p(F,null,A(z.value,a=>(i(),g(L,{key:a.id,label:a.name,value:a.id},{default:s(()=>[t("div",wt,[t("span",null,r(a.name),1),t("span",Dt," 手续费: "+r(a.fee)+" "+r(l.currency),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):y("",!0),u.value==="bank"?(i(),g(U,{key:1,label:"银行卡",prop:"bankCard"},{default:s(()=>[n(M,{modelValue:l.bankCard,"onUpdate:modelValue":e[4]||(e[4]=a=>l.bankCard=a),placeholder:"请选择银行卡"},{default:s(()=>[(i(!0),p(F,null,A(te.value,a=>(i(),g(L,{key:a.id,label:`${a.bankName} (*${a.cardNumber.slice(-4)})`,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),t("div",Ct,[n(K,{type:"primary",onClick:ue},{default:s(()=>[...e[10]||(e[10]=[d(" + 添加新银行卡 ",-1)])]),_:1})])]),_:1})):y("",!0)]),_:1},8,["model"]),l.amount?(i(),p("div",Et,[n(v,{class:"fee-summary"},{header:s(()=>[...e[11]||(e[11]=[t("span",{class:"font-medium"},"费用明细",-1)])]),default:s(()=>[t("div",ht,[t("div",Vt,[e[12]||(e[12]=t("span",null,"充值金额",-1)),t("span",Nt,r(f(l.amount,l.currency)),1)]),t("div",Tt,[e[13]||(e[13]=t("span",null,"手续费",-1)),t("span",St,r(f(W.value,l.currency)),1)]),n(xe),t("div",Bt,[e[14]||(e[14]=t("span",null,"实际到账",-1)),t("span",null,r(f(se.value,l.currency)),1)])])]),_:1})])):y("",!0),t("div",Rt,[n(h,{onClick:Q},{default:s(()=>[...e[15]||(e[15]=[d("重置",-1)])]),_:1}),n(h,{type:"primary",onClick:re,loading:C.value,disabled:!le.value},{default:s(()=>[...e[16]||(e[16]=[d(" 确认充值 ",-1)])]),_:1},8,["loading","disabled"])])]),_:1})])):y("",!0),n(we,{modelValue:k.value,"onUpdate:modelValue":e[6]||(e[6]=a=>k.value=a),title:"充值指引",width:"600px",center:""},{footer:s(()=>[t("div",qt,[n(h,{onClick:e[5]||(e[5]=a=>k.value=!1)},{default:s(()=>[...e[34]||(e[34]=[d("稍后充值",-1)])]),_:1}),n(h,{type:"primary",onClick:de},{default:s(()=>[...e[35]||(e[35]=[d(" 已完成转账 ",-1)])]),_:1})])]),default:s(()=>{var a;return[u.value==="crypto"?(i(),p("div",jt,[t("div",Ut,[t("h3",$t,r((a=_.value)==null?void 0:a.name)+" 充值地址",1),e[17]||(e[17]=t("p",{class:"text-sm text-gray-500"},"请向以下地址转账",-1))]),t("div",Ft,[n(v,{class:"text-center"},{default:s(()=>{var N,$,J;return[e[25]||(e[25]=t("div",{class:"qr-code mb-4"},[t("div",{class:"w-48 h-48 mx-auto bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center"},[t("span",{class:"text-gray-500"},"QR Code")])],-1)),t("div",At,[e[19]||(e[19]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-2"},"充值地址",-1)),t("div",Ht,[n(Y,{value:c.value,readonly:"",class:"text-center"},null,8,["value"]),n(h,{onClick:ie,type:"primary",icon:X(Le)},{default:s(()=>[...e[18]||(e[18]=[d(" 复制 ",-1)])]),_:1},8,["icon"])])]),t("div",It,[t("p",Lt,[e[20]||(e[20]=t("strong",null,"网络:",-1)),d(" "+r((N=j.value)==null?void 0:N.name),1),e[21]||(e[21]=t("br",null,null,-1)),e[22]||(e[22]=t("strong",null,"最小充值:",-1)),d(" "+r(f(($=_.value)==null?void 0:$.minDeposit,l.currency)),1),e[23]||(e[23]=t("br",null,null,-1)),e[24]||(e[24]=t("strong",null,"确认数:",-1)),d(" "+r((J=j.value)==null?void 0:J.confirmations)+" 个区块确认 ",1)])])]}),_:1})]),n(Z,{type:"warning",closable:!1,class:"mt-4"},{title:s(()=>[...e[26]||(e[26]=[t("strong",null,"重要提醒",-1)])]),default:s(()=>[e[27]||(e[27]=t("ul",{class:"list-disc list-inside space-y-1 text-sm"},[t("li",null,"请确保转账网络与选择的网络一致"),t("li",null,"转账金额必须大于最小充值限额"),t("li",null,"充值到账需要等待区块确认，请耐心等待"),t("li",null,"请勿向此地址充值其他币种，否则资产将无法找回")],-1))]),_:1})])):y("",!0),u.value==="bank"?(i(),p("div",Mt,[e[33]||(e[33]=t("div",{class:"text-center mb-6"},[t("h3",{class:"text-lg font-medium mb-2"},"银行转账信息"),t("p",{class:"text-sm text-gray-500"},"请按以下信息进行转账")],-1)),n(ke,{column:1,border:""},{default:s(()=>[n(S,{label:"收款银行"},{default:s(()=>[...e[28]||(e[28]=[d("交通银行",-1)])]),_:1}),n(S,{label:"收款账号"},{default:s(()=>[...e[29]||(e[29]=[d("1234567890123456",-1)])]),_:1}),n(S,{label:"收款人"},{default:s(()=>[...e[30]||(e[30]=[d("USDT Trading Platform",-1)])]),_:1}),n(S,{label:"转账金额"},{default:s(()=>[d(r(f(l.amount,"CNY")),1)]),_:1}),n(S,{label:"转账备注"},{default:s(()=>[d(r(w.value),1)]),_:1})]),_:1}),n(Z,{type:"info",closable:!1,class:"mt-4"},{title:s(()=>[...e[31]||(e[31]=[t("strong",null,"转账说明",-1)])]),default:s(()=>[e[32]||(e[32]=t("ul",{class:"list-disc list-inside space-y-1 text-sm"},[t("li",null,"请务必在转账备注中填写订单号，否则无法及时到账"),t("li",null,"转账金额必须与订单金额完全一致"),t("li",null,"工作日转账通常2小时内到账，节假日可能延迟"),t("li",null,"如有疑问请联系客服")],-1))]),_:1})])):y("",!0)]}),_:1},8,["modelValue"]),t("div",Ot,[n(v,null,{header:s(()=>[t("div",zt,[e[37]||(e[37]=t("span",{class:"text-lg font-medium"},"最近充值记录",-1)),n(h,{text:"",type:"primary",onClick:ce},{default:s(()=>[...e[36]||(e[36]=[d(" 查看全部 ",-1)])]),_:1})])]),default:s(()=>[et((i(),g(Ce,{data:I.value,style:{width:"100%"}},{default:s(()=>[n(V,{prop:"createdAt",label:"时间",width:"180"},{default:s(({row:a})=>[d(r(pe(a.createdAt)),1)]),_:1}),n(V,{prop:"currency",label:"币种",width:"100"}),n(V,{prop:"amount",label:"金额",width:"120"},{default:s(({row:a})=>[d(r(f(a.amount,a.currency)),1)]),_:1}),n(V,{prop:"method",label:"方式",width:"100"},{default:s(({row:a})=>[d(r(fe(a.method)),1)]),_:1}),n(V,{prop:"status",label:"状态",width:"100"},{default:s(({row:a})=>[n(De,{type:ve(a.status)},{default:s(()=>[d(r(_e(a.status)),1)]),_:2},1032,["type"])]),_:1}),n(V,{prop:"txHash",label:"交易哈希","min-width":"200"},{default:s(({row:a})=>[a.txHash?(i(),g(K,{key:0,type:"primary",onClick:N=>me(a.txHash)},{default:s(()=>[d(r(a.txHash.slice(0,20))+"... ",1)]),_:2},1032,["onClick"])):(i(),p("span",Pt,"-"))]),_:1})]),_:1},8,["data"])),[[he,E.value]]),!E.value&&I.value.length===0?(i(),g(Ee,{key:0,description:"暂无充值记录"})):y("",!0)]),_:1})])])}}}),Xt=nt(Wt,[["__scopeId","data-v-76fe09f1"]]);export{Xt as default};
